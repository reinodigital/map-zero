import{a as V}from"./chunk-5LJDG4R3.js";import{a as P}from"./chunk-FUDPSQJN.js";import{a as O}from"./chunk-5TLBDS6K.js";import{a as G}from"./chunk-WKFQL3IM.js";import{b as T,c as l,d as _,e as F,h as A,k as L,n as R,o as I,p as k,q as D,t as B,u as M}from"./chunk-UP3F5373.js";import{k as h,r as N,v as x}from"./chunk-4ZQGKSBB.js";import{$a as c,Ba as y,Jb as i,Lb as w,Ma as a,Wa as E,ba as s,fb as u,kb as d,lb as b,nb as g,ob as C,pb as e,qb as t,rb as p,wa as S,zb as f}from"./chunk-F6XVVQNR.js";function U(r,n){r&1&&(e(0,"small",13),i(1," nombre debe tener m\xE1s de 2 caracteres "),t())}function j(r,n){r&1&&(e(0,"small",13),i(1," tel\xE9fono debe ser un n\xFAmero de 8 d\xEDgitos "),t())}function z(r,n){r&1&&(e(0,"small",13),i(1," formato incorrecto de correo "),t())}function $(r,n){r&1&&(e(0,"small",13),i(1," contrase\xF1a debe tener al menos 6 caracteres "),t())}function H(r,n){if(r&1&&(e(0,"option",22),i(1),t()),r&2){let o=n.$implicit;u("value",o),a(),w(" ",o," ")}}var v=class r{platformId=s(y);fb=s(B);commonAdminService=s(P);authService=s(x);formErrorService=s(O);customToastService=s(G);router=s(N);allowedRoles=["ADMIN","ADMINISTRATIVE_ASSISTANT","SELLER","ACCOUNTANT"];emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";newEmployeeForm=S(this.fb.group({name:["",[l.required,l.minLength(2)]],email:["",[l.required,l.pattern(this.emailPattern)]],password:["123456",[l.required,l.minLength(6)]],mobile:["",[l.required,l.minLength(8),l.maxLength(8)]],rol:["SELLER",[l.required]]}));get isBrowser(){return h(this.platformId)}validField(n){return this.newEmployeeForm().controls[n].touched&&this.newEmployeeForm().controls[n].invalid}onSubmit(){if(this.newEmployeeForm().invalid){this.formErrorService.throwFormErrors(this.newEmployeeForm());return}let n={};for(let o in this.newEmployeeForm().value)if(this.newEmployeeForm().value.hasOwnProperty(o)){let m=this.newEmployeeForm().controls[o].value;m&&(o==="rol"?n.roles=[m]:n[o]=m)}this.authService.register(n).subscribe(o=>{o&&o.msg?(this.customToastService.add({message:o.msg,type:"success",duration:5e3}),this.router.navigateByUrl("/list-employees")):this.customToastService.add({message:o.message,type:"error",duration:5e3})})}comeBackToList(){this.commonAdminService.comeBackToList("/list-employees")}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=E({type:r,selectors:[["new-employee"]],decls:50,vars:7,consts:[[1,"main_content"],[3,"primaryText","primaryLink"],[1,"box"],[1,"d-flex","justify-content-between"],[1,""],[1,"cp",3,"click"],[1,"fa-solid","fa-angles-left"],[1,"form",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-lg-4"],["for","name"],[1,"asterisk"],["type","text","formControlName","name"],[1,"text-danger"],["for","mobile"],["type","text","formControlName","mobile"],["for","email"],["type","text","formControlName","email"],["for","password"],["type","text","formControlName","password"],["for","rol"],["formControlName","rol"],[3,"value"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mt-5"],["type","submit",1,"btn","btn-success"]],template:function(o,m){o&1&&(e(0,"div",0),p(1,"breadcrumb",1),e(2,"div",2)(3,"div",3)(4,"h3",4),i(5,"Nuevo empleado"),t(),e(6,"h4",5),f("click",function(){return m.comeBackToList()}),p(7,"i",6),i(8," Regresar "),t()(),e(9,"form",7),f("ngSubmit",function(){return m.onSubmit()}),e(10,"div",8)(11,"div",9)(12,"label",10),i(13,"Nombre "),e(14,"span",11),i(15,"*"),t()(),p(16,"input",12),c(17,U,2,0,"small",13),t(),e(18,"div",9)(19,"label",14),i(20,"Tel\xE9fono "),e(21,"span",11),i(22,"*"),t()(),p(23,"input",15),c(24,j,2,0,"small",13),t(),e(25,"div",9)(26,"label",16),i(27," Correo electr\xF3nico "),e(28,"span",11),i(29,"*"),t()(),p(30,"input",17),c(31,z,2,0,"small",13),t(),e(32,"div",9)(33,"label",18),i(34," Contrase\xF1a temporal "),e(35,"span",11),i(36,"*"),t()(),p(37,"input",19),c(38,$,2,0,"small",13),t(),e(39,"div",9)(40,"label",20),i(41,"Rol "),e(42,"span",11),i(43,"*"),t()(),e(44,"select",21),g(45,H,2,2,"option",22,b),t()()(),e(47,"div",23)(48,"button",24),i(49,"Guardar"),t()()()()()),o&2&&(a(),u("primaryText","Listado de empleados")("primaryLink","/list-employees"),a(8),u("formGroup",m.newEmployeeForm()),a(8),d(m.validField("name")?17:-1),a(7),d(m.validField("mobile")?24:-1),a(7),d(m.validField("email")?31:-1),a(7),d(m.validField("password")?38:-1),a(7),C(m.allowedRoles))},dependencies:[M,A,k,D,T,I,_,F,L,R,V],encapsulation:2,changeDetection:0})};export{v as default};
