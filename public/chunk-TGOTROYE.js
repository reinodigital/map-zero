import{a as z}from"./chunk-ERLWE727.js";import{a as G}from"./chunk-Y5YTRTSY.js";import{b as N,d as k,e as O,h as A,k as I,n as V,t as D,u as j}from"./chunk-M7YRKM4J.js";import{s as w,z as T}from"./chunk-3CBJ3RTU.js";import{Ib as l,Jb as u,Kb as g,La as a,Va as E,_a as h,ba as C,eb as v,ec as y,ia as _,ja as b,jb as p,mb as F,nb as L,ob as t,pb as e,qb as d,ub as x,wa as r,yb as f,zb as c}from"./chunk-54LR7GFL.js";var R=(n,o)=>o.id;function P(n,o){if(n&1){let i=x();t(0,"i",26),f("click",function(){_(i);let m=c();return b(m.openCloseFilters())}),e()}}function $(n,o){if(n&1){let i=x();t(0,"i",27),f("click",function(){_(i);let m=c();return b(m.openCloseFilters())}),e()}}function q(n,o){n&1&&(t(0,"div",23)(1,"div",28)(2,"div",29)(3,"h4",30),l(4,"Loading"),e(),d(5,"i",31),t(6,"p",32),l(7,"Cargando..."),e()()()())}function B(n,o){if(n&1&&(t(0,"tr",38)(1,"td"),l(2),e(),t(3,"td"),l(4),e(),t(5,"td"),l(6),e(),t(7,"td"),l(8),e()()),n&2){let i=o.$implicit;v("routerLink","/detail-client/"+i.id),a(2),u(i.name),a(2),u(i.identity),a(2),u(i.email),a(2),u(i.mobile)}}function H(n,o){if(n&1&&(t(0,"tr")(1,"div",39)(2,"div",40),l(3),e()()()),n&2){let i=c(2);a(3),g(" ",i.isActiveFilters()?"Sin resultados para esa b\xFAsqueda":"No existen clientes por el momento en el sistema"," ")}}function J(n,o){if(n&1&&(t(0,"div",24)(1,"div",2)(2,"div",10)(3,"div",33)(4,"h3"),l(5),e(),t(6,"button",34),l(7," + Nuevo cliente "),e()(),t(8,"div",35)(9,"table",36)(10,"thead")(11,"tr")(12,"th"),l(13,"Nombre"),e(),t(14,"th"),l(15,"C\xE9dula"),e(),t(16,"th"),l(17,"Correo"),e(),t(18,"th"),l(19,"Tel\xE9fono"),e()()(),t(20,"tbody",37),F(21,B,9,5,"tr",38,R,!1,H,4,1,"tr"),e()()()()()()),n&2){let i=c();a(5),g("Listado clientes (",i.total(),")"),a(16),L(i.clients())}}function K(n,o){if(n&1){let i=x();t(0,"div",25)(1,"app-pagination",41),f("offsetEmitter",function(m){_(i);let M=c();return b(M.detectChangeOffset(m))}),e()()}if(n&2){let i=c();a(),v("total",i.total())("factor",i.limit)("initialOffset",i.offset())}}var S=class n{fb=C(D);clientService=C(T);listClientsService=C(z);clients=r([]);limit=5;offset=y(()=>this.listClientsService.lastOffsetListClients());total=r(0);isLoading=r(!0);filtersOpen=r(!1);filters=r({});isActiveFilters=r(!1);searchForm=r(this.fb.group({name:["",[]],identity:["",[]],email:["",[]],mobile:["",[]]}));ngOnInit(){this.fetchAllClients()}fetchAllClients(){this.clientService.fetchAll(this.limit,this.offset(),this.filters()).subscribe(o=>{o&&o.count>=0&&(this.total.set(o.count),this.clients.set(o.clients)),this.isLoading.set(!1)})}openCloseFilters(){this.filtersOpen.set(!this.filtersOpen())}searchFormSubmit(){this.filters.set(this.searchForm().value),this.listClientsService.lastOffsetListClients.set(0),this.isActiveFilters.set(!0),this.fetchAllClients()}restartFilters(){this.listClientsService.lastOffsetListClients.set(0),this.isActiveFilters.set(!1),this.filters.set({}),this.searchForm().reset(),this.fetchAllClients()}detectChangeOffset(o){this.isLoading.set(!0),this.listClientsService.lastOffsetListClients.set(o),this.fetchAllClients()}static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["list-clients"]],decls:36,vars:5,consts:[[1,"main_content"],[1,"filters","mb-4"],[1,"box"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"mb-0"],["data-bs-toggle","collapse","data-bs-target","#collapseFilters","aria-expanded","false","aria-controls","collapseFilters",1,"fa-solid","fa-window-minimize"],["data-bs-toggle","collapse","data-bs-target","#collapseFilters","aria-expanded","false","aria-controls","collapseFilters",1,"fa-solid","fa-window-maximize"],["id","collapseFilters",1,"collapse"],[1,"card","card-body"],["autocomplete","off",1,"search_form",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-lg-4"],["for","name"],["type","text","formControlName","name"],["for","identity"],["type","text","formControlName","identity"],["for","email"],["type","text","formControlName","email"],["for","mobile"],["type","text","formControlName","mobile"],[1,"d-flex","justify-content-start","mt-4"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-light","ms-2",3,"click"],[1,"row","animate__animated","animate__fadeIn"],[1,"table_clients"],[1,"d-flex","justify-content-center","w_100","mt-4"],["data-bs-toggle","collapse","data-bs-target","#collapseFilters","aria-expanded","false","aria-controls","collapseFilters",1,"fa-solid","fa-window-minimize",3,"click"],["data-bs-toggle","collapse","data-bs-target","#collapseFilters","aria-expanded","false","aria-controls","collapseFilters",1,"fa-solid","fa-window-maximize",3,"click"],[1,"col-12"],["role","alert",1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-o"],[1,"d-flex","justify-content-between","mb-3"],["routerLink","/new-client",1,"btn","btn-primary","mb-2"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"animate__animated","animate__fadeIn"],[1,"admin_tr",3,"routerLink"],[1,"w-100","d-flex","justify-content-start"],[1,"alert","alert-warning"],[3,"offsetEmitter","total","factor","initialOffset"]],template:function(i,s){i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),l(5,"Filtrar clientes"),e(),h(6,P,1,0,"i",5)(7,$,1,0,"i",6),e(),t(8,"div",7)(9,"div",8)(10,"form",9),f("ngSubmit",function(){return s.searchFormSubmit()}),t(11,"div",10)(12,"div",11)(13,"label",12),l(14,"Nombre"),e(),d(15,"input",13),e(),t(16,"div",11)(17,"label",14),l(18,"C\xE9dula"),e(),d(19,"input",15),e(),t(20,"div",11)(21,"label",16),l(22,"Correo electr\xF3nico"),e(),d(23,"input",17),e(),t(24,"div",11)(25,"label",18),l(26,"Tel\xE9fono"),e(),d(27,"input",19),e()(),t(28,"div",20)(29,"button",21),l(30,"Filtrar"),e(),t(31,"button",22),f("click",function(){return s.restartFilters()}),l(32," Restablecer filtros "),e()()()()()()(),h(33,q,8,0,"div",23)(34,J,24,2,"div",24)(35,K,2,3,"div",25),e()),i&2&&(a(6),p(s.filtersOpen()?6:7),a(4),v("formGroup",s.searchForm()),a(23),p(s.isLoading()?33:-1),a(),p(s.isLoading()?-1:34),a(),p(s.total()?35:-1))},dependencies:[j,A,N,k,O,I,V,w,G],encapsulation:2,changeDetection:0})};export{S as default};
