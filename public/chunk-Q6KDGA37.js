import{a as J}from"./chunk-BWXSIWVZ.js";import{a as H}from"./chunk-YRVU5RW6.js";import{b as D,d as M,e as U,h as V,k as j,n as G,o as B,p as P,q as $,t as z,u as q}from"./chunk-SRQMAJVA.js";import{j as w,k as O,s as k,v as R}from"./chunk-7OFENO7U.js";import{Ba as F,Cb as y,Ib as i,Jb as b,Kb as _,La as a,Va as L,_a as E,ba as d,eb as f,ec as T,hb as A,ia as C,ja as g,jb as u,kb as I,mb as x,nb as h,ob as t,pb as e,qb as m,ub as N,wa as s,yb as v,zb as c}from"./chunk-QAVPLLNK.js";var Q=(n,l)=>l.uid;function W(n,l){n&1&&m(0,"i",5)}function X(n,l){n&1&&m(0,"i",6)}function Y(n,l){if(n&1&&(t(0,"option",21),i(1),e()),n&2){let o=l.$implicit;f("value",o),a(),_(" ",o," ")}}function Z(n,l){n&1&&(t(0,"div",28)(1,"div",31)(2,"div",32)(3,"h4",33),i(4,"Loading"),e(),m(5,"i",34),t(6,"p",35),i(7,"Cargando..."),e()()()())}function ee(n,l){if(n&1&&(t(0,"tr",41)(1,"td"),i(2),e(),t(3,"td"),i(4),e(),t(5,"td"),i(6),e(),t(7,"td")(8,"span"),i(9),e()()()),n&2){let o,r=l.$implicit,p=c(2);f("routerLink","/detail-employee/"+r.uid),a(2),b(r.name),a(2),b(r.mobile),a(2),b((o=r.email)!==null&&o!==void 0?o:"_"),a(2),A(p.listEmployeesService.getClassForUserRole(r.roles[0])),a(),_(" ",r.roles[0]," ")}}function te(n,l){if(n&1&&(t(0,"tr")(1,"div",42)(2,"div",43),i(3),e()()()),n&2){let o=c(2);a(3),_(" ",o.isActiveFilters()?"Sin resultados para esa b\xFAsqueda":"No existen empleados por el momento en el sistema"," ")}}function ie(n,l){if(n&1&&(t(0,"div",29)(1,"div",2)(2,"div",10)(3,"div",36)(4,"h3"),i(5),e(),t(6,"button",37),i(7," + Nuevo empleado "),e()(),t(8,"div",38)(9,"table",39)(10,"thead")(11,"tr")(12,"th"),i(13,"Nombre"),e(),t(14,"th"),i(15,"Tel\xE9fono"),e(),t(16,"th"),i(17,"Correo"),e(),t(18,"th"),i(19,"Rol"),e()()(),t(20,"tbody",40),x(21,ee,10,7,"tr",41,Q,!1,te,4,1,"tr"),e()()()()()()),n&2){let o=c();a(5),_("Listado empleados (",o.total(),")"),a(16),h(o.users())}}function ne(n,l){if(n&1){let o=N();t(0,"div",30)(1,"app-pagination",44),v("offsetEmitter",function(p){C(o);let K=c();return g(K.detectChangeOffset(p))}),e()()}if(n&2){let o=c();a(),f("total",o.total())("factor",o.limit)("initialOffset",o.offset())}}var S=class n{platformId=d(F);fb=d(z);authService=d(R);listEmployeesService=d(J);users=s([]);limit=5;offset=T(()=>this.listEmployeesService.lastOffsetEmployeesList());total=s(0);isLoading=s(!0);filtersOpen=s(!1);filters=s({});isActiveFilters=s(!1);searchForm=s(this.fb.group({name:["",[]],mobile:["",[]],email:["",[]],role:["",[]],status:["",[]]}));allowedFilteredRoles=["ADMINISTRATIVE_ASSISTANT","ADMIN","SELLER","ACCOUNTANT"];get isBrowser(){return O(this.platformId)}ngOnInit(){this.fetchAllUsers()}fetchAllUsers(){this.authService.fetchAllByAdmin(this.limit,this.offset(),this.filters()).subscribe(l=>{l&&l.count>=0&&(this.total.set(l.count),this.users.set(l.users)),this.isLoading.set(!1)})}openCloseFilters(){this.filtersOpen.set(!this.filtersOpen())}searchFormSubmit(){this.filters.set(this.searchForm().value),this.listEmployeesService.lastOffsetEmployeesList.set(0),this.isActiveFilters.set(!0),this.fetchAllUsers()}restartFilters(){this.listEmployeesService.lastOffsetEmployeesList.set(0),this.isActiveFilters.set(!1),this.filters.set({}),this.searchForm().reset(),this.fetchAllUsers()}detectChangeOffset(l){this.isLoading.set(!0),this.listEmployeesService.lastOffsetEmployeesList.set(l),this.fetchAllUsers()}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=L({type:n,selectors:[["list-employees"]],decls:52,vars:7,consts:[[1,"main_content"],[1,"filters","mb-4"],[1,"box"],["data-bs-toggle","collapse","data-bs-target","#collapseFilters","aria-expanded","false","aria-controls","collapseFilters",1,"d-flex","justify-content-between","align-items-center","cp","mb-2",3,"click"],[1,"mb-0"],[1,"fa-solid","fa-window-minimize"],[1,"fa-solid","fa-window-maximize"],["id","collapseFilters",1,"collapse"],[1,"card","card-body"],["autocomplete","off",1,"search_form",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-lg-4"],["for","name"],["type","text","formControlName","name"],["for","mobile"],["type","text","formControlName","mobile"],["for","email"],["type","text","formControlName","email"],[1,"d-flex","flex-column"],["for","rol"],["formControlName","role"],[3,"value"],["formControlName","status"],["value","active"],["value","inactive"],[1,"d-flex","justify-content-start","mt-4"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-light","ms-2",3,"click"],[1,"row","animate__animated","animate__fadeIn"],[1,"table_clients"],[1,"d-flex","justify-content-center","w_100","mt-4"],[1,"col-12"],["role","alert",1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-o"],[1,"d-flex","justify-content-between","mb-3"],["routerLink","/new-employee",1,"btn","btn-primary","mb-2"],[1,"table-responsive"],[1,"table"],[1,"animate__animated","animate__fadeIn"],[1,"admin_tr",3,"routerLink"],[1,"w-100","d-flex","justify-content-start"],[1,"alert","alert-warning"],[3,"offsetEmitter","total","factor","initialOffset"]],template:function(o,r){o&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),v("click",function(){return r.openCloseFilters()}),t(4,"h3",4),i(5,"Filtrar empleados"),e(),E(6,W,1,0,"i",5)(7,X,1,0,"i",6),e(),t(8,"div",7)(9,"div",8)(10,"form",9),v("ngSubmit",function(){return r.searchFormSubmit()}),t(11,"div",10)(12,"div",11)(13,"label",12),i(14,"Nombre"),e(),m(15,"input",13),e(),t(16,"div",11)(17,"label",14),i(18,"Tel\xE9fono"),e(),m(19,"input",15),e(),t(20,"div",11)(21,"label",16),i(22,"Correo electr\xF3nico"),e(),m(23,"input",17),e(),t(24,"div",11)(25,"div",18)(26,"label",19),i(27,"Rol"),e(),t(28,"select",20)(29,"option",21),i(30,"--Seleccione--"),e(),x(31,Y,2,2,"option",21,I),e()()(),t(33,"div",11)(34,"div",18)(35,"label",19),i(36,"Estado"),e(),t(37,"select",22)(38,"option",21),i(39,"--Seleccione--"),e(),t(40,"option",23),i(41,"Activo"),e(),t(42,"option",24),i(43,"No activo"),e()()()()(),t(44,"div",25)(45,"button",26),i(46,"Filtrar"),e(),t(47,"button",27),v("click",function(){return r.restartFilters()}),i(48," Restablecer filtros "),e()()()()()()(),E(49,Z,8,0,"div",28)(50,ie,24,2,"div",29)(51,ne,2,3,"div",30),e()),o&2&&(a(6),u(r.filtersOpen()?6:7),a(4),f("formGroup",r.searchForm()),a(19),y("value",null),a(2),h(r.allowedFilteredRoles),a(7),y("value",null),a(11),u(r.isLoading()?49:-1),a(),u(r.isLoading()?-1:50),a(),u(r.total()?51:-1))},dependencies:[w,k,H,q,V,P,$,D,B,M,U,j,G],encapsulation:2,changeDetection:0})};export{S as default};
