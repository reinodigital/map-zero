import{a as P}from"./chunk-B2MQD4SO.js";import{a as O}from"./chunk-SVF2QQ2X.js";import{a as G}from"./chunk-QULINWIQ.js";import{b as F,c as m,d as x,e as T,h as A,k as R,n as I,o as L,p as D,q as k,t as B,u as M}from"./chunk-UQEQGUXM.js";import{k as h,r as N,v as _}from"./chunk-K4252JJD.js";import{Ba as E,Ib as i,Kb as w,La as s,Va as y,_a as c,ba as a,eb as u,jb as d,kb as g,mb as b,nb as C,ob as e,pb as t,qb as p,wa as S,yb as f}from"./chunk-QAVPLLNK.js";function q(r,n){r&1&&(e(0,"small",12),i(1," nombre debe tener m\xE1s de 2 caracteres "),t())}function U(r,n){r&1&&(e(0,"small",12),i(1," tel\xE9fono debe ser un n\xFAmero de 8 d\xEDgitos "),t())}function j(r,n){r&1&&(e(0,"small",12),i(1," formato incorrecto de correo "),t())}function z(r,n){r&1&&(e(0,"small",12),i(1," contrase\xF1a debe tener al menos 6 caracteres "),t())}function $(r,n){if(r&1&&(e(0,"option",21),i(1),t()),r&2){let o=n.$implicit;u("value",o),s(),w(" ",o," ")}}var v=class r{platformId=a(E);fb=a(B);commonAdminService=a(P);authService=a(_);formErrorService=a(O);customToastService=a(G);router=a(N);allowedRoles=["ADMIN","ADMINISTRATIVE_ASSISTANT","SELLER","ACCOUNTANT"];emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";newEmployeeForm=S(this.fb.group({name:["",[m.required,m.minLength(2)]],email:["",[m.required,m.pattern(this.emailPattern)]],password:["123456",[m.required,m.minLength(6)]],mobile:["",[m.required,m.minLength(8),m.maxLength(8)]],rol:["SELLER",[m.required]]}));get isBrowser(){return h(this.platformId)}validField(n){return this.newEmployeeForm().controls[n].touched&&this.newEmployeeForm().controls[n].invalid}onSubmit(){if(this.newEmployeeForm().invalid){this.formErrorService.throwFormErrors(this.newEmployeeForm());return}let n={};for(let o in this.newEmployeeForm().value)if(this.newEmployeeForm().value.hasOwnProperty(o)){let l=this.newEmployeeForm().controls[o].value;l&&(o==="rol"?n.roles=[l]:n[o]=l)}this.authService.register(n).subscribe(o=>{o&&o.msg?(this.customToastService.add({message:o.msg,type:"success",duration:5e3}),this.router.navigateByUrl("/list-employees")):this.customToastService.add({message:o.message,type:"error",duration:5e3})})}comeBackToList(){this.commonAdminService.comeBackToList("/list-employees")}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=y({type:r,selectors:[["new-employee"]],decls:49,vars:5,consts:[[1,"main_content"],[1,"box"],[1,"d-flex","justify-content-between"],[1,""],[1,"cp",3,"click"],[1,"fa-solid","fa-angles-left"],[1,"form",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-lg-4"],["for","name"],[1,"asterisk"],["type","text","formControlName","name"],[1,"text-danger"],["for","mobile"],["type","text","formControlName","mobile"],["for","email"],["type","text","formControlName","email"],["for","password"],["type","text","formControlName","password"],["for","rol"],["formControlName","rol"],[3,"value"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mt-5"],["type","submit",1,"btn","btn-success"]],template:function(o,l){o&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),i(4,"Nuevo empleado"),t(),e(5,"h4",4),f("click",function(){return l.comeBackToList()}),p(6,"i",5),i(7," Regresar "),t()(),e(8,"form",6),f("ngSubmit",function(){return l.onSubmit()}),e(9,"div",7)(10,"div",8)(11,"label",9),i(12,"Nombre "),e(13,"span",10),i(14,"*"),t()(),p(15,"input",11),c(16,q,2,0,"small",12),t(),e(17,"div",8)(18,"label",13),i(19,"Tel\xE9fono "),e(20,"span",10),i(21,"*"),t()(),p(22,"input",14),c(23,U,2,0,"small",12),t(),e(24,"div",8)(25,"label",15),i(26," Correo electr\xF3nico "),e(27,"span",10),i(28,"*"),t()(),p(29,"input",16),c(30,j,2,0,"small",12),t(),e(31,"div",8)(32,"label",17),i(33," Contrase\xF1a temporal "),e(34,"span",10),i(35,"*"),t()(),p(36,"input",18),c(37,z,2,0,"small",12),t(),e(38,"div",8)(39,"label",19),i(40,"Rol "),e(41,"span",10),i(42,"*"),t()(),e(43,"select",20),b(44,$,2,2,"option",21,g),t()()(),e(46,"div",22)(47,"button",23),i(48,"Guardar"),t()()()()()),o&2&&(s(8),u("formGroup",l.newEmployeeForm()),s(8),d(l.validField("name")?16:-1),s(7),d(l.validField("mobile")?23:-1),s(7),d(l.validField("email")?30:-1),s(7),d(l.validField("password")?37:-1),s(7),C(l.allowedRoles))},dependencies:[M,A,D,k,F,L,x,T,R,I],encapsulation:2,changeDetection:0})};export{v as default};
