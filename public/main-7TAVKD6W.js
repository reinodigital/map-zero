import{a as _e}from"./chunk-XO5AROVW.js";import{a as ce,j as F,k as B,l as le,m as me,n as pe,o as ue,q as de,r as h,s as fe,t as ve,v as b}from"./chunk-3CBJ3RTU.js";import{Ba as q,Eb as Z,Fb as J,Gb as X,Ib as d,Jb as M,Kb as ie,La as m,U as v,Va as A,X as _,Xb as re,_a as W,a as G,b as Y,ba as a,eb as ee,fb as te,gb as T,gc as ae,hb as ne,ia as P,ic as se,ja as k,jb as oe,kb as E,mb as N,nb as L,ob as r,pb as s,qb as u,ub as O,wa as I,yb as y,zb as w}from"./chunk-54LR7GFL.js";var ge=(()=>{class n{constructor(){this.document=a(ce),this.platformId=a(q),this.request=a(se,{optional:!0}),this.documentIsAccessible=B(this.platformId)}static getCookieRegExp(e){let o=e.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+o+"|;\\s*"+o+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(e){try{return decodeURIComponent(e)}catch{return e}}check(e){return e=encodeURIComponent(e),n.getCookieRegExp(e).test(this.documentIsAccessible?this.document.cookie:this.request?.headers.get("cookie"))}get(e){if(this.check(e)){e=encodeURIComponent(e);let t=n.getCookieRegExp(e).exec(this.documentIsAccessible?this.document.cookie:this.request?.headers.get("cookie"));return t&&t[1]?n.safeDecodeURIComponent(t[1]):""}return""}getAll(){let e={},o=this.documentIsAccessible?this.document?.cookie:this.request?.headers.get("cookie");return o&&o!==""&&o.split(";").forEach(t=>{let[l,C]=t.split("=");e[n.safeDecodeURIComponent(l.replace(/^ /,""))]=n.safeDecodeURIComponent(C)}),e}set(e,o,t,l,C,U,z,ye){if(!this.documentIsAccessible)return;if(typeof t=="number"||t instanceof Date||l||C||U||z){let Q={expires:t,path:l,domain:C,secure:U,sameSite:z||"Lax",partitioned:ye};this.set(e,o,Q);return}let x=encodeURIComponent(e)+"="+encodeURIComponent(o)+";",p=t||{};if(p.expires)if(typeof p.expires=="number"){let Q=new Date(new Date().getTime()+p.expires*1e3*60*60*24);x+="expires="+Q.toUTCString()+";"}else x+="expires="+p.expires.toUTCString()+";";p.path&&(x+="path="+p.path+";"),p.domain&&(x+="domain="+p.domain+";"),p.secure===!1&&p.sameSite==="None"&&(p.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${e} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),p.secure&&(x+="secure;"),p.sameSite||(p.sameSite="Lax"),x+="sameSite="+p.sameSite+";",p.partitioned&&(x+="Partitioned;"),this.document.cookie=x}delete(e,o,t,l,C="Lax"){if(!this.documentIsAccessible)return;let U=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(e,"",{expires:U,path:o,domain:t,secure:l,sameSite:C})}deleteAll(e,o,t,l="Lax"){if(!this.documentIsAccessible)return;let C=this.getAll();for(let U in C)C.hasOwnProperty(U)&&this.delete(U,e,o,t,l)}static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var c=class n{authService=a(b);router=a(h);canActivate(i,e){return this.authService.revalidateToken().pipe(v(o=>{o||this.router.navigateByUrl("/login")}))}canLoad(i,e){return this.authService.revalidateToken().pipe(v(o=>{o||this.router.navigateByUrl("/login")}))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})};var g=class n{authService=a(b);router=a(h);canActivate(i,e){return this.authService.revalidateToken().pipe(v(o=>{if(o){let t=this.authService._user;!t()?.roles.includes("ADMIN")&&!t()?.roles.includes("SUPER_ADMIN")&&this.router.navigateByUrl("/login")}}))}canLoad(i,e){return this.authService.revalidateToken().pipe(v(o=>{if(o){let t=this.authService._user;!t()?.roles.includes("ADMIN")&&!t()?.roles.includes("SUPER_ADMIN")&&this.router.navigateByUrl("/login")}}))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})};var R=class n{authService=a(b);router=a(h);canActivate(i,e){return this.authService.revalidateToken().pipe(v(o=>{if(o){let t=this.authService._user;!t()?.roles.includes("ADMIN")&&!t()?.roles.includes("ACCOUNTANT")&&!t()?.roles.includes("SUPER_ADMIN")&&this.router.navigateByUrl("/dashboard")}}))}canLoad(i,e){return this.authService.revalidateToken().pipe(v(o=>{if(o){let t=this.authService._user;!t()?.roles.includes("ADMIN")&&!t()?.roles.includes("ACCOUNTANT")&&!t()?.roles.includes("SUPER_ADMIN")&&this.router.navigateByUrl("/dashboard")}}))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})};var f=class n{authService=a(b);router=a(h);canActivate(i,e){return this.authService.revalidateToken().pipe(v(o=>{if(o){let t=this.authService._user;!t()?.roles.includes("ADMIN")&&!t()?.roles.includes("SELLER")&&!t()?.roles.includes("SUPER_ADMIN")&&this.router.navigateByUrl("/dashboard")}}))}canLoad(i,e){return this.authService.revalidateToken().pipe(v(o=>{if(o){let t=this.authService._user;!t()?.roles.includes("ADMIN")&&!t()?.roles.includes("SELLER")&&!t()?.roles.includes("SUPER_ADMIN")&&this.router.navigateByUrl("/dashboard")}}))}static \u0275fac=function(e){return new(e||n)};static \u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})};var be=[{path:"",loadComponent:()=>import("./chunk-4NTQXJ4N.js"),canActivate:[c],canLoad:[c]},{path:"login",loadComponent:()=>import("./chunk-GZAHYXOL.js")},{path:"profile",loadComponent:()=>import("./chunk-JIL3KTL7.js"),canActivate:[c],canLoad:[c]},{path:"list-employees",loadComponent:()=>import("./chunk-7PIQAZ72.js"),canActivate:[g],canLoad:[g]},{path:"new-employee",loadComponent:()=>import("./chunk-LCJFA4DW.js"),canActivate:[g],canLoad:[g]},{path:"edit-employee/:id",loadComponent:()=>import("./chunk-IYJZK4HO.js"),canActivate:[g],canLoad:[g]},{path:"detail-employee/:id",loadComponent:()=>import("./chunk-BSYL3BRE.js"),canActivate:[g],canLoad:[g]},{path:"list-clients",loadComponent:()=>import("./chunk-TGOTROYE.js"),canActivate:[f],canLoad:[f]},{path:"detail-client/:id",loadComponent:()=>import("./chunk-QKOYJKGY.js"),canActivate:[f],canLoad:[f]},{path:"new-client",loadComponent:()=>import("./chunk-OP3WQEPA.js"),canActivate:[f],canLoad:[f]},{path:"edit-client/:id",loadComponent:()=>import("./chunk-JQ77A2WY.js"),canActivate:[f],canLoad:[f]},{path:"list-items",loadComponent:()=>import("./chunk-KKU3FJGI.js"),canActivate:[c],canLoad:[c]},{path:"new-item",loadComponent:()=>import("./chunk-RP73TTW7.js"),canActivate:[c],canLoad:[c]},{path:"detail-item/:id",loadComponent:()=>import("./chunk-KPRVAVS7.js"),canActivate:[c],canLoad:[c]},{path:"edit-item/:id",loadComponent:()=>import("./chunk-N4227O4P.js"),canActivate:[c],canLoad:[c]},{path:"list-quotes",loadComponent:()=>import("./chunk-MYN2PF2R.js"),canActivate:[f],canLoad:[f]},{path:"new-quote",loadComponent:()=>import("./chunk-6LYFMT7I.js"),canActivate:[f],canLoad:[f]},{path:"detail-quote/:id",loadComponent:()=>import("./chunk-25RWH7AS.js"),canActivate:[c],canLoad:[c]},{path:"edit-quote/:id",loadComponent:()=>import("./chunk-AKQ5JJLS.js"),canActivate:[c],canLoad:[c]},{path:"list-accounts",loadComponent:()=>import("./chunk-2MBBVCA3.js"),canActivate:[R],canLoad:[R]},{path:"list-account-type",loadComponent:()=>import("./chunk-4PPRU6SR.js"),canActivate:[R],canLoad:[R]}];var Ce={providers:[re({eventCoalescing:!0}),ve(be),ue(),me(pe()),ge]};var Me=["userContainer"],Se=["userIcon"];function xe(n,i){if(n&1){let e=O();r(0,"ul")(1,"li",6),u(2,"i",7),r(3,"span",8),d(4),s()(),r(5,"li",6),u(6,"i",9),r(7,"span",8),d(8),s()(),r(9,"li",6),u(10,"i",10),r(11,"span",8),d(12),s()(),r(13,"li",6),u(14,"i",11),r(15,"span",8),d(16),s()()(),u(17,"div",12),r(18,"button",13),y("click",function(){P(e);let t=w();return k(t.logout())}),u(19,"i",14),d(20," Cerrar Sesi\xF3n "),s()}if(n&2){let e=w();m(4),M(e.currentUser().name),m(4),M(e.currentUser().email),m(4),M(e.currentUser().mobile),m(4),M(e.currentUser().roles[0])}}function Ie(n,i){n&1&&(r(0,"div",15)(1,"h6"),d(2,"Sesi\xF3n de usuario cerrada"),s()(),r(3,"button",16),d(4," Iniciar Sesi\xF3n "),s())}var j=class n{platformId=a(q);authService=a(b);userInfoIsOpen=I(!1);blankUser={uid:0,name:"_",email:"_",mobile:"_",roles:[],isActive:0};userContainer;userIcon;get isBrowser(){return B(this.platformId)}currentUser=ae(()=>this.authService._user()??this.blankUser);logout(){this.userInfoIsOpen()&&this.authService.logout().subscribe(i=>this.userInfoIsOpen.set(!1))}onMouseOver(){this.isBrowser&&this.userIcon.nativeElement.matches(":hover")&&!this.userInfoIsOpen()&&this.userInfoIsOpen.set(!0)}onMouseLeave(){this.isBrowser&&this.userInfoIsOpen()&&setTimeout(()=>{this.userContainer.nativeElement.matches(":hover")||this.userInfoIsOpen.set(!1)},100)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["current-user"]],viewQuery:function(e,o){if(e&1&&(Z(Me,5),Z(Se,5)),e&2){let t;J(t=X())&&(o.userContainer=t.first),J(t=X())&&(o.userIcon=t.first)}},hostBindings:function(e,o){e&1&&y("mouseover",function(l){return o.onMouseOver(l)})("mouseleave",function(l){return o.onMouseLeave(l)})},decls:8,vars:3,consts:[["userContainer",""],["userIcon",""],[1,"user"],["title","Mi Perfil",1,"user_icon"],[1,"fa-solid","fa-user-tie"],[1,"user_info"],[1,"user_info_li"],[1,"fa-solid","fa-user"],[1,"ms-2"],[1,"fa-solid","fa-envelope"],[1,"fa-solid","fa-mobile"],[1,"fa-solid","fa-bolt"],[1,"line_divider","mt-2"],["type","button",1,"btn","btn-danger","mt-3",3,"click"],[1,"fa-solid","fa-door-closed"],[1,"alert","alert-warning"],["type","button","routerLink","/login",1,"btn","btn-success","mt-3"]],template:function(e,o){e&1&&(r(0,"div",2,0)(2,"div",3,1),u(4,"i",4),s(),r(5,"div",5),W(6,xe,21,4)(7,Ie,5,0),s()()),e&2&&(m(5),T("appearance",o.userInfoIsOpen()),m(),oe(o.currentUser().uid!==0?6:7))},dependencies:[F,fe],styles:[".user[_ngcontent-%COMP%]{position:relative}.user_icon[_ngcontent-%COMP%]{border-radius:50%;background-color:var(--white);cursor:pointer;padding:.6rem 1rem}.user_info[_ngcontent-%COMP%]{border-radius:var(--border_radius);background-color:var(--white);position:fixed;padding:2rem;top:4.5rem;right:-30rem;opacity:0;z-index:999;transition:opacity .3s ease-in-out}.user_info[_ngcontent-%COMP%]   .user_info_li[_ngcontent-%COMP%]{color:var(--text);font-family:var(--font_secondary);font-size:1.4rem}.user_info[_ngcontent-%COMP%]   .user_info_li[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--primary_orange);font-size:1.3rem}.appearance[_ngcontent-%COMP%]{right:1rem;opacity:1}"],changeDetection:0})};function Ae(n,i){if(n&1){let e=O();r(0,"div",1)(1,"p",2),d(2),s(),r(3,"small",3),y("click",function(){let t=P(e).$index,l=w();return k(l.removeToast(t))}),d(4,"X"),s()()}if(n&2){let e=i.$implicit;te("background-color",e.type==="success"?"var(--green)":"var(--red)"),m(2),M(e.message)}}var V=class n{toastService=a(_e);removeToast(i){this.toastService.remove(i)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["custom-toast"]],hostAttrs:[1,"toast_fixed"],decls:2,vars:0,consts:[[1,"toast_square","mb-2",3,"backgroundColor"],[1,"toast_square","mb-2"],[1,"toast_square_text"],[1,"toast_square_remove",3,"click"]],template:function(e,o){e&1&&N(0,Ae,5,3,"div",0,E),e&2&&L(o.toastService.toasts())},styles:[".toast_square[_ngcontent-%COMP%]{border-radius:.6rem;display:flex;align-items:flex-start;justify-content:space-between;padding:1rem;opacity:.85;transform:translateY(-20px);animation:_ngcontent-%COMP%_slideDown .4s ease-out forwards}.toast_square[_ngcontent-%COMP%]   .toast_square_text[_ngcontent-%COMP%]{color:var(--white);font-size:1.5rem;max-width:32rem}.toast_square[_ngcontent-%COMP%]   .toast_square_remove[_ngcontent-%COMP%]{cursor:pointer;font-weight:900;border-radius:50%;background-color:var(--white);padding:.1rem .5rem}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}"],changeDetection:0})};var $=class n{router=a(h);openMenuIndex=I(null);lastMenuItemActiveId=I("collapseAccounting");menu=I([{label:"Contabilidad",icon:"fa-solid fa-calculator me-2",id:"collapseAccounting",isActive:!0,submenu:[{label:"Tipos de cuentas",baseUrl:"/list-account-type",subroutes:["list-account-type"]},{label:"Cuentas",baseUrl:"/list-accounts",subroutes:["list-accounts"]}]},{label:"Negocio",icon:"fas fa-user-tie me-2",id:"collapseBusiness",isActive:!1,submenu:[{label:"Empleados",baseUrl:"/list-employees",subroutes:["list-employees","new-employee","edit-employee","detail-employee"]},{label:"Clientes",baseUrl:"/list-clients",subroutes:["list-clients","new-client","edit-client","detail-client"]},{label:"Items",baseUrl:"/list-items",subroutes:["list-items","new-item","edit-item","detail-item"]},{label:"Cotizaciones",baseUrl:"/list-quotes",subroutes:["list-quotes","new-quote","edit-quote","detail-quote"]}]}]);toggleMenuParent(i){let e=this.menu().map(t=>t.id===i?Y(G({},t),{isActive:!t.isActive}):Y(G({},t),{isActive:!1}));this.menu.set(e);let o=e.find(t=>t.isActive);o?this.lastMenuItemActiveId.set(o.id):this.lastMenuItemActiveId.set("")}navigateToRoute(i){this.router.navigateByUrl(`/${i}`)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=_({token:n,factory:n.\u0275fac,providedIn:"root"})};function we(n,i){if(n&1){let e=O();r(0,"a",15),y("click",function(){let t=P(e).$implicit,l=w(2);return k(l.customMenuService.navigateToRoute(t.baseUrl))}),r(1,"span"),d(2),s()()}if(n&2){let e=i.$implicit;m(2),ie("- ",e.label,"")}}function Ue(n,i){if(n&1){let e=O();r(0,"div",4)(1,"div",12),y("click",function(){let t=P(e).$implicit,l=w();return k(l.customMenuService.toggleMenuParent(t.id))}),u(2,"i"),r(3,"span"),d(4),s()(),r(5,"div",13),N(6,we,3,1,"a",14,E),s()()}if(n&2){let e=i.$implicit;m(2),ne(e.icon),m(2),M(e.label),m(),T("showLinks",e.isActive),ee("id",e.id),m(),L(e.submenu)}}var D=class n{customMenuService=a($);isMenuOpen=I(!0);openCloseMenu(){this.isMenuOpen.set(!this.isMenuOpen())}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["main-layout"]],decls:19,vars:4,consts:[[1,"main"],[1,"main_menu"],[1,"main_menu_title"],[1,"main_menu_list"],[1,"main_menu_list_parent"],[1,"main_content"],[1,"main_content_header"],[3,"click"],[1,"fa-solid","fa-bars","fs-1","me-3"],[1,"main_content_header_title"],[1,"main_content_spacer"],[1,"content"],[1,"main_menu_list_parent_title_icon",3,"click"],[1,"main_menu_list_parent_dropdown",3,"id"],[1,"main_menu_list_parent_dropdown_link"],[1,"main_menu_list_parent_dropdown_link",3,"click"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"aside",1)(2,"h3",2),d(3,"MENU"),s(),r(4,"nav",3),N(5,Ue,8,6,"div",4,E),s()(),r(7,"div",5)(8,"header",6)(9,"div",7),y("click",function(){return o.openCloseMenu()}),u(10,"i",8),s(),r(11,"h2",9),d(12,"Map Zero"),s(),u(13,"span",10)(14,"current-user"),s(),r(15,"main",11),u(16,"custom-toast")(17,"router-outlet"),s(),u(18,"div",10),s()()),e&2&&(m(),T("main_menu_open",o.isMenuOpen()),m(4),L(o.customMenuService.menu()),m(2),T("main_content_margin_left",o.isMenuOpen()))},dependencies:[F,de,j,V],styles:[".main_menu_open[_ngcontent-%COMP%]{left:0!important}.main_content_margin_left[_ngcontent-%COMP%]{padding-left:21rem}.main[_ngcontent-%COMP%]{height:100%;position:relative;width:100%}.main_menu[_ngcontent-%COMP%]{background-color:var(--secondary);box-shadow:2px 0 5px #0003;display:flex;flex-direction:column;height:100vh;padding:.4rem;position:absolute;top:0;left:-24rem;height:100dvh;width:21rem;z-index:11;transition:left .3s ease-in-out}.main_menu[_ngcontent-%COMP%]   .main_menu_title[_ngcontent-%COMP%]{margin:2rem 0rem 1rem 1rem}.main_menu_list[_ngcontent-%COMP%]{display:flex;flex-direction:column;z-index:12}.main_menu_list[_ngcontent-%COMP%]   .main_menu_list_parent[_ngcontent-%COMP%]   .main_menu_list_parent_title_icon[_ngcontent-%COMP%]{display:flex;align-items:center;border-radius:1.5rem;cursor:pointer;padding:1rem 1.5rem}.main_menu_list[_ngcontent-%COMP%]   .main_menu_list_parent[_ngcontent-%COMP%]   .main_menu_list_parent_title_icon[_ngcontent-%COMP%]:hover{background-color:var(--light)}.main_menu_list_parent_dropdown[_ngcontent-%COMP%]{display:none}.main_menu_list_parent_dropdown[_ngcontent-%COMP%]   .main_menu_list_parent_dropdown_link[_ngcontent-%COMP%]{cursor:pointer;border-radius:1.5rem;display:flex;align-items:center;padding:1rem 1.5rem;margin-left:2rem}.main_menu_list_parent_dropdown[_ngcontent-%COMP%]   .main_menu_list_parent_dropdown_link[_ngcontent-%COMP%]:hover{background-color:var(--gray)}.showLinks[_ngcontent-%COMP%]{display:flex;flex-direction:column}.main_content[_ngcontent-%COMP%]{display:flex;flex-direction:column;transition:padding-left .3s ease-in-out}.main_content_header[_ngcontent-%COMP%]{box-shadow:2px 0 5px #0003;background-color:var(--secondary);display:flex;align-items:center;padding:1.4rem;height:6dvh}.main_content_header[_ngcontent-%COMP%]   .main_content_header_title[_ngcontent-%COMP%]{margin-bottom:0}.main_content_header[_ngcontent-%COMP%]   .main_content_spacer[_ngcontent-%COMP%]{flex:1 auto}.content[_ngcontent-%COMP%]{padding:1rem;height:94dvh;overflow-y:scroll}@media (min-width: 768px){.content[_ngcontent-%COMP%]{padding:2rem}}.main_content_spacer[_ngcontent-%COMP%]{flex:1 auto}.footer[_ngcontent-%COMP%]{margin-left:1rem}"],changeDetection:0})};var H=class n{title="map-zero";static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(e,o){e&1&&u(0,"main-layout")},dependencies:[D],encapsulation:2})};le(H,Ce).catch(n=>console.error(n));
