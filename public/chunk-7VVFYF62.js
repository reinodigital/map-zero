import{a as B}from"./chunk-RR4UJ4H3.js";import{a as U,b as q}from"./chunk-RZK5OI6K.js";import"./chunk-KGOR65YN.js";import"./chunk-YRVU5RW6.js";import{a as P}from"./chunk-NEVGVLEA.js";import{a as V}from"./chunk-U4TVSC3Q.js";import{a as M}from"./chunk-QULINWIQ.js";import{b as w,c as a,d as T,e as _,h as F,k as D,n as I,o as A,p as R,q as L,t as O,u as k}from"./chunk-SRQMAJVA.js";import{A as N,k as y,r as g,v as h,z as x}from"./chunk-7OFENO7U.js";import{Ba as C,Ib as t,La as c,Va as E,_a as d,ba as m,eb as f,jb as p,ob as e,pb as i,qb as s,wa as v,yb as u}from"./chunk-QAVPLLNK.js";function j(r,n){r&1&&(e(0,"small",19),t(1," nombre debe tener m\xE1s de 2 caracteres "),i())}function z(r,n){r&1&&(e(0,"small",19),t(1," tel\xE9fono debe ser un n\xFAmero de 8 d\xEDgitos "),i())}function J(r,n){r&1&&(e(0,"small",19),t(1," formato incorrecto de correo "),i())}function X(r,n){r&1&&(e(0,"small",19),t(1," c\xE9dula debe tener enter 9 a 12 caracteres "),i())}var S=class r{platformId=m(C);fb=m(O);commonAdminService=m(P);authService=m(h);clientService=m(x);formErrorService=m(V);customToastService=m(M);router=m(g);sellers=v([]);emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";newClientForm=v(this.fb.group({name:["",[a.required,a.minLength(2)]],type:["CLIENTE",[a.required]],email:["",[a.required,a.pattern(this.emailPattern)]],mobile:["",[a.required,a.minLength(8),a.maxLength(8)]],identity:["",[a.required,a.minLength(8),a.maxLength(12)]],identityType:["02",[a.required]],currency:["USD",[a.required]],notes:["",[]],defaultSeller:[null,[]],activities:[[],[]]}));get isBrowser(){return y(this.platformId)}ngOnInit(){this.fetchSellers()}fetchSellers(){this.authService.fetchAllSellers().subscribe(n=>{n&&n.length&&this.sellers.set(n)})}validField(n){return this.newClientForm().controls[n].touched&&this.newClientForm().controls[n].invalid}onEconomicActivityChange(n){this.newClientForm().controls.activities.patchValue(n)}onSubmit(){if(this.newClientForm().invalid){this.formErrorService.throwFormErrors(this.newClientForm());return}let n={};n.createdAt=N(new Date);for(let l in this.newClientForm().value)if(this.newClientForm().value.hasOwnProperty(l)){let o=this.newClientForm().controls[l].value;o&&l!=="defaultSeller"&&(n[l]=o),o&&l==="defaultSeller"&&(n[l]=o.name)}this.clientService.create(n).subscribe(l=>{l&&l.msg?(this.customToastService.add({message:l.msg,type:"success",duration:5e3}),this.router.navigateByUrl("/list-clients")):this.customToastService.add({message:l.message,type:"error",duration:5e3})})}comeBackToList(){this.commonAdminService.comeBackToList("/list-clients")}static \u0275fac=function(l){return new(l||r)};static \u0275cmp=E({type:r,selectors:[["new-client"]],decls:99,vars:7,consts:[[1,"main_content"],[1,"box"],[1,"d-flex","justify-content-between","mb-5"],[1,""],[1,"cp",3,"click"],[1,"fa-solid","fa-angles-left"],[1,"d-flex","justify-content-between","align-items-center"],["id","pills-tab","role","tablist",1,"nav","nav-pills","mb-4","div_pills"],["role","presentation",1,"nav-item"],["id","pills-fields-tab","data-bs-toggle","pill","type","button","data-bs-target","#pills-fields","role","tab","aria-controls","pills-fields","aria-selected","true",1,"nav-link","active"],["id","pills-activity-tab","data-bs-toggle","pill","type","button","data-bs-target","#pills-activity","role","tab","aria-controls","pills-activity","aria-selected","false",1,"nav-link"],["id","pills-tabContent",1,"tab-content"],["id","pills-fields","role","tabpanel","aria-labelledby","pills-fields-tab","tabindex","0",1,"tab-pane","fade","active","show"],[1,"form",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-lg-4"],["for","name"],[1,"asterisk"],["type","text","formControlName","name"],[1,"text-danger"],["for","type"],["formControlName","type"],["value","CLIENTE"],["value","PROVEEDOR"],["for","mobile"],["type","text","formControlName","mobile"],["for","email"],["type","text","formControlName","email"],["for","identity"],["type","text","formControlName","identity"],["for","identityType"],["formControlName","identityType",1,"w-100"],["value","01"],["value","02"],["value","03"],["value","04"],["for","currency"],["formControlName","currency",1,"w-100"],["value","USD"],["value","CRC"],["for","defaultSeller"],[1,"muted"],["bindLabel","name","placeholder","--Seleccione--","formControlName","defaultSeller",3,"items","searchable"],[1,"col-12"],["for","notes"],["formControlName","notes","rows","2"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mt-5"],["type","submit",1,"btn","btn-success"],["id","pills-activity","role","tabpanel","aria-labelledby","pills-activity-tab","tabindex","0",1,"tab-pane","fade"],[3,"activityChange"]],template:function(l,o){l&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t(4,"Nuevo contacto"),i(),e(5,"h4",4),u("click",function(){return o.comeBackToList()}),s(6,"i",5),t(7," Regresar "),i()(),e(8,"div",6)(9,"ul",7)(10,"li",8)(11,"button",9),t(12," Formulario "),i(),e(13,"button",10),t(14," Actividades econ\xF3micas "),i()()()(),e(15,"div",11)(16,"div",12)(17,"form",13),u("ngSubmit",function(){return o.onSubmit()}),e(18,"div",14)(19,"div",15)(20,"label",16),t(21,"Nombre "),e(22,"span",17),t(23,"*"),i()(),s(24,"input",18),d(25,j,2,0,"small",19),i(),e(26,"div",15)(27,"label",20),t(28," Tipo contacto "),e(29,"span",17),t(30,"*"),i()(),e(31,"select",21)(32,"option",22),t(33,"CLIENTE"),i(),e(34,"option",23),t(35,"PROVEEDOR"),i()()(),e(36,"div",15)(37,"label",24),t(38," Tel\xE9fono "),e(39,"span",17),t(40,"*"),i()(),s(41,"input",25),d(42,z,2,0,"small",19),i(),e(43,"div",15)(44,"label",26),t(45," Correo electr\xF3nico "),e(46,"span",17),t(47,"*"),i()(),s(48,"input",27),d(49,J,2,0,"small",19),i(),e(50,"div",15)(51,"label",28),t(52," C\xE9dula "),e(53,"span",17),t(54,"*"),i()(),s(55,"input",29),d(56,X,2,0,"small",19),i(),e(57,"div",15)(58,"label",30),t(59," Tipo C\xE9dula "),e(60,"span",17),t(61,"*"),i()(),e(62,"select",31)(63,"option",32),t(64,"F\xEDsica"),i(),e(65,"option",33),t(66,"Jur\xEDdica"),i(),e(67,"option",34),t(68,"DIMEX"),i(),e(69,"option",35),t(70,"NITE"),i()()(),e(71,"div",15)(72,"label",36),t(73," Moneda "),e(74,"span",17),t(75,"*"),i()(),e(76,"select",37)(77,"option",38),t(78,"USD"),i(),e(79,"option",39),t(80,"CRC"),i()()(),e(81,"div",15)(82,"label",40),t(83," Vendedor "),e(84,"span",41),t(85,"opcional"),i()(),s(86,"ng-select",42),i()(),e(87,"div",14)(88,"div",43)(89,"label",44),t(90," Notas "),e(91,"span",41),t(92,"opcional"),i()(),s(93,"textarea",45),i()(),e(94,"div",46)(95,"button",47),t(96,"Guardar"),i()()()(),e(97,"div",48)(98,"economic-activity-select",49),u("activityChange",function(G){return o.onEconomicActivityChange(G)}),i()()()()()),l&2&&(c(17),f("formGroup",o.newClientForm()),c(8),p(o.validField("name")?25:-1),c(17),p(o.validField("mobile")?42:-1),c(7),p(o.validField("email")?49:-1),c(7),p(o.validField("identity")?56:-1),c(30),f("items",o.sellers())("searchable",!0))},dependencies:[k,F,R,L,w,A,T,_,D,I,q,U,B],encapsulation:2,changeDetection:0})};export{S as default};
