import{a as b}from"./chunk-KGOR65YN.js";import{a as G,b as k,d as D,g as I,j as x,u as T}from"./chunk-UQEQGUXM.js";import{B as P,I as j,j as $}from"./chunk-K4252JJD.js";import{C as w,G as F,Ib as l,Jb as E,Kb as C,La as a,Lb as U,S as A,U as O,Va as d,W as N,_a as S,ba as _,db as L,eb as g,gb as Q,hb as q,ia as V,ja as R,jb as y,mb as z,na as v,nb as B,ob as o,p as M,pb as s,qb as h,sa as p,ta as m,ub as W,wa as u,yb as c,zb as f}from"./chunk-QAVPLLNK.js";var te=(i,e)=>e.name;function ie(i,e){if(i&1){let t=W();o(0,"li",4),c("click",function(){let r=V(t).$implicit,Z=f(2);return R(Z.selectItem(r))}),o(1,"div",5)(2,"span",6),l(3),s(),o(4,"span",7),l(5),s(),o(6,"span",8),l(7),s()()()}if(i&2){let t=e.$implicit;a(3),E(t.cabys),a(2),E(t.shortName),a(2),C(" ",t.shortName," ")}}function ne(i,e){if(i&1&&(o(0,"ul",2),z(1,ie,8,3,"li",3,te),s()),i&2){let t=f();a(),B(t.items())}}var H=class i{destroyRef=_(v);itemService=_(j);searchControl=new I("");items=u([]);selectedItem=u("");notResultsString="sin resultados encontrados";_isSelectingItem=u(!1);_isInitialLoad=u(!0);itemSelectedEmitter=p();onChange=()=>{};onTouched=()=>{};isDisabled=!1;ngOnInit(){this.setupSearchControlListener()}writeValue(e){if(e==null){this.searchControl.setValue("",{emitEvent:!1}),this._isInitialLoad.set(!1);return}this._isSelectingItem.set(!0),typeof e=="number"?this.itemService.findOneAsSuggestion(e).pipe(b(this.destroyRef),O(()=>this._isSelectingItem.set(!0))).subscribe({next:t=>{t&&t.id?(this.searchControl.setValue(t.shortName,{emitEvent:!1}),this.selectedItem.set(t.name),this._isInitialLoad()&&(t.isLoadingExistingItem=!0,this.itemSelectedEmitter.emit(t),this.onChange(t.id))):(this.searchControl.setValue("",{emitEvent:!1}),this.selectedItem.set(""),this.onChange(null))},error:t=>{this.searchControl.setValue("",{emitEvent:!1}),this.selectedItem.set(""),this.onChange(null)},complete:()=>{this._isInitialLoad.set(!1),this._isSelectingItem.set(!1)}}):typeof e=="string"?(this.searchControl.setValue(e,{emitEvent:!1}),this.selectedItem.set(e),this._isInitialLoad.set(!1),this._isSelectingItem.set(!1)):(this.searchControl.setValue("",{emitEvent:!1}),this.selectedItem.set(""),this._isInitialLoad.set(!1),this._isSelectingItem.set(!1))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.isDisabled=e,e?this.searchControl.disable():this.searchControl.enable()}setupSearchControlListener(){this.searchControl.valueChanges.pipe(b(this.destroyRef),w(e=>typeof e=="string"&&!this._isSelectingItem()),F(500),O(e=>this.onTouched()),A(e=>{let t=e?e.trim():"";return!t||t.length<3?(this.items.set([]),this.selectedItem()!==""&&(this.onChange(null),this.itemSelectedEmitter.emit(null)),this.selectedItem.set(""),M([])):this.itemService.getSuggestions(t)})).subscribe(e=>{e.length===1&&e[0].name===this.notResultsString?(this.items.set(e),setTimeout(()=>{this.items.set([])},2e3)):this.items.set(e)})}selectItem(e){e.id&&(this._isSelectingItem.set(!0),this.searchControl.setValue(e.shortName,{emitEvent:!1}),this.selectedItem.set(e.shortName),this.items.set([]),this.onChange(e.id),this.onTouched(),this.itemSelectedEmitter.emit(e),setTimeout(()=>{this._isSelectingItem.set(!1)},50))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=d({type:i,selectors:[["custom-select"]],outputs:{itemSelectedEmitter:"itemSelectedEmitter"},features:[U([{provide:G,useExisting:N(()=>i),multi:!0}])],decls:3,vars:2,consts:[[1,"custom_select"],["type","text",3,"formControl"],[1,"suggestions"],[1,"suggestion_item"],[1,"suggestion_item",3,"click"],[1,"d-flex","flex-column"],[1,"suggestion_item_cabys"],[1,"suggestion_item_name"],[1,"suggestion_item_name_little"]],template:function(t,n){t&1&&(o(0,"div",0),h(1,"input",1),S(2,ne,3,0,"ul",2),s()),t&2&&(a(),g("formControl",n.searchControl),a(),y(n.items().length?2:-1))},dependencies:[T,k,D,x],styles:[".custom_select[_ngcontent-%COMP%]{position:relative}ul.suggestions[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0;position:absolute;top:3.2rem;left:0;width:40rem;box-shadow:0 2px 5px #0000001a;background-color:var(--background);border:2px solid var(--black);z-index:980}li[_ngcontent-%COMP%]{cursor:pointer;color:var(--black);font-size:1.3rem;padding:10px}li[_ngcontent-%COMP%]:hover{background-color:var(--light)}li[_ngcontent-%COMP%]:last-child{border-bottom:none}li[_ngcontent-%COMP%]   .suggestion_item_cabys[_ngcontent-%COMP%]{font-size:1.1rem;color:var(--text);background-color:var(--white);border-radius:.4rem;border:1px solid var(--black);padding:0rem .2rem;width:fit-content}li[_ngcontent-%COMP%]   .suggestion_item_name[_ngcontent-%COMP%]{color:var(--black);font-size:1.6rem;font-weight:500;margin-top:.5rem}li[_ngcontent-%COMP%]   .suggestion_item_name_little[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:400;color:var(--text)}"],changeDetection:0})};var X=class i{destroyRef=_(v);dateControl=new I(this.dateInSevenDay,[]);optionsAreOpen=u(!1);dateChanged=p();get dateInSevenDay(){let e=new Date,t=new Date(new Date().setDate(e.getDate()+7));return P(t)}ngOnInit(){this.dateControl.valueChanges.pipe(b(this.destroyRef)).subscribe(e=>{this.dateChanged.emit(e)})}setDate(e){let t=new Date,n=new Date(t.setDate(t.getDate()+e)),r=P(n);r&&this.dateControl.patchValue(r),this.optionsAreOpen.set(!1)}toggleOptions(){this.optionsAreOpen.set(!this.optionsAreOpen())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=d({type:i,selectors:[["quick-date-picker"]],outputs:{dateChanged:"dateChanged"},decls:17,vars:3,consts:[[1,"date_custom"],[1,"date_picker"],["type","date",3,"formControl"],[1,"fa-regular","fa-square-caret-down","fs-1","ms-3",3,"click"],[1,"date_options"],[1,"date_options_li",3,"click"],[1,"date_options_li_span","ms-3"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1),h(2,"input",2),o(3,"i",3),c("click",function(){return n.toggleOptions()}),s()(),o(4,"ul",4)(5,"li",5),c("click",function(){return n.setDate(0)}),o(6,"span",6),l(7,"Hoy"),s()(),o(8,"li",5),c("click",function(){return n.setDate(7)}),o(9,"span",6),l(10,"En 7 d\xEDas"),s()(),o(11,"li",5),c("click",function(){return n.setDate(14)}),o(12,"span",6),l(13,"En 14 d\xEDas"),s()(),o(14,"li",5),c("click",function(){return n.setDate(30)}),o(15,"span",6),l(16,"En 30 d\xEDas"),s()()()()),t&2&&(a(2),g("formControl",n.dateControl),a(2),Q("hidden",!n.optionsAreOpen()))},dependencies:[$,T,k,D,x],styles:[".date_custom[_ngcontent-%COMP%]{position:relative}.date_picker[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:.4rem}.date_options[_ngcontent-%COMP%]{display:block;background-color:var(--light);position:absolute;top:3rem;width:100%;transition:display .3s ease-in-out}.date_options_li[_ngcontent-%COMP%]{cursor:pointer;font-size:1.5rem}.date_options_li[_ngcontent-%COMP%]:hover{background-color:var(--gray)}.hidden[_ngcontent-%COMP%]{display:none}"],changeDetection:0})};function oe(i,e){if(i&1&&(o(0,"div",1),l(1),h(2,"div",2),s()),i&2){let t=f();a(),C(" ",t.secondaryText()," ")}}function se(i,e){if(i&1&&l(0),i&2){let t=f();C(" ",t.primaryText()," ")}}var Y=class i{isFormSubmitting=m.required();primaryText=m.required();secondaryText=m.required();attributeName=m(null);attributeClass=m(null);attributeType=m("button");buttonAction=m(null);actionToApply=m(null);btnWasClicked=p();onClick(){this.attributeType()==="submit"||!this.buttonAction()||this.btnWasClicked.emit(this.buttonAction())}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=d({type:i,selectors:[["submit-button"]],inputs:{isFormSubmitting:[1,"isFormSubmitting"],primaryText:[1,"primaryText"],secondaryText:[1,"secondaryText"],attributeName:[1,"attributeName"],attributeClass:[1,"attributeClass"],attributeType:[1,"attributeType"],buttonAction:[1,"buttonAction"],actionToApply:[1,"actionToApply"]},outputs:{btnWasClicked:"btnWasClicked"},decls:3,vars:6,consts:[[3,"click","disabled"],[1,"d-flex","align-items-center"],[1,"spinner","ms-2"]],template:function(t,n){if(t&1&&(o(0,"button",0),c("click",function(){return n.attributeType()==="button"&&n.onClick()}),S(1,oe,3,1,"div",1)(2,se,1,1),s()),t&2){let r;q((r=n.attributeClass())!==null&&r!==void 0?r:"btn btn-success"),g("disabled",n.isFormSubmitting()),L("type",n.attributeType())("name",n.attributeName()),a(),y(n.isFormSubmitting()?1:2)}},styles:[".responsive_btn[_ngcontent-%COMP%]{margin-top:.6rem}@media (min-width: 768px){.responsive_btn[_ngcontent-%COMP%]{margin-top:1.2rem}}"],changeDetection:0})};var Ee=i=>parseFloat(i.toFixed(2));export{Ee as a,H as b,X as c,Y as d};
