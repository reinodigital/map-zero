import{u as j,v as G,w as K}from"./chunk-FL5XDDUQ.js";import{a as V}from"./chunk-GRP2BXQC.js";import{b as I,c as p,d as E,e as M,h as x,k as w,n as U,o as O,p as D,q as N,t as R,u as P}from"./chunk-TUWVJ4C7.js";import{a as k}from"./chunk-XO5AROVW.js";import{C as J,h as Y,j as F,u as A,w as H,x as _}from"./chunk-SQGBK3PG.js";import{Ib as n,Jb as C,Kb as y,La as c,Qa as T,Rb as Q,Sb as X,Va as S,X as B,_a as d,ba as l,eb as s,j as q,jb as f,kb as z,mb as b,nb as h,ob as t,pb as o,qb as v,wa as m,yb as g}from"./chunk-54LR7GFL.js";var ne=(a,e)=>e.id,ie=(a,e)=>e.code;function ae(a,e){if(a&1&&(t(0,"option",8),n(1),o()),a&2){let i=e.$implicit;s("value",i.id),c(),C(i.name)}}function re(a,e){a&1&&(t(0,"small",9),n(1," tipo cuenta es requerido "),o())}function ce(a,e){a&1&&(t(0,"small",9),n(1," c\xF3digo con al menos 3 caracteres "),o())}function le(a,e){a&1&&(t(0,"small",9),n(1," requiere al menos 2 caracteres "),o())}function me(a,e){if(a&1&&(t(0,"option",8),n(1),o()),a&2){let i=e.$implicit;s("value",i.code),c(),C(i.label)}}var $=class a{constructor(e){this.payload=e;this.accountId.set(e.id),this.dataForm.set(e.account)}fb=l(R);dialogRef=l(j);formErrorService=l(V);accountTypeService=l(_);accountService=l(H);customToastService=l(k);taxRates=J;categories=Object.values(A);accountsType=m([]);newAccountForm=m(this.fb.group({accountTypeId:["",[p.required]],name:["",[p.required,p.minLength(2)]],code:["",[p.required,p.minLength(3)]],description:[null,[]],tax:[null,[]]}));accountId=m(null);dataForm=m(null);ngOnInit(){this.accountTypeService.fetchAll().subscribe(e=>{e&&(this.accountsType.set(e),this.fillOutForm())})}fillOutForm(){this.accountId()&&(this.newAccountForm().controls.accountTypeId.patchValue(this.dataForm()?.accountTypeId),this.newAccountForm().controls.name.patchValue(this.dataForm()?.name),this.newAccountForm().controls.code.patchValue(this.dataForm()?.code),this.newAccountForm().controls.description.patchValue(this.dataForm()?.description),this.newAccountForm().controls.tax.patchValue(this.dataForm()?.tax))}closePopUp(e=null){this.dialogRef.close(e)}validField(e){return this.newAccountForm().controls[e].touched&&this.newAccountForm().controls[e].invalid}onSubmit(){if(this.newAccountForm().invalid){this.formErrorService.throwFormErrors(this.newAccountForm());return}this.accountId()?this.updateAccount():this.createAccount()}createAccount(){this.accountService.create(this.newAccountForm().value).subscribe(e=>{this.processResponse(e)})}updateAccount(){this.accountService.update(this.accountId(),this.newAccountForm().value).subscribe(e=>{this.processResponse(e)})}processResponse(e){e&&e.msg?(this.customToastService.add({message:e.msg,type:"success",duration:5e3}),this.closePopUp(e.msg)):this.customToastService.add({message:e.message,type:"error",duration:5e3})}static \u0275fac=function(i){return new(i||a)(T(G))};static \u0275cmp=S({type:a,selectors:[["modal-create-update-account"]],decls:57,vars:8,consts:[["autocomplete","off",1,"form","container",3,"ngSubmit","formGroup"],[1,"header_form"],[1,"fa-solid","fa-xmark","icon_close",3,"click"],[1,"form_content"],[1,"col-12"],[1,"asterisk"],["formControlName","accountTypeId"],["value",""],[3,"value"],[1,"form-text","text-danger"],["formControlName","code"],["formControlName","name"],[1,"muted"],["formControlName","description","rows","2"],["formControlName","tax"],["type","submit",1,"btn","btn-success","mt-4","mb-4","w-100",3,"disabled"]],template:function(i,r){i&1&&(t(0,"form",0),g("ngSubmit",function(){return r.onSubmit()}),t(1,"div",1)(2,"h3"),n(3),o(),t(4,"i",2),g("click",function(){return r.closePopUp()}),o()(),t(5,"div",3)(6,"div",4)(7,"label"),n(8,"Tipo cuenta "),t(9,"span",5),n(10,"*"),o()(),t(11,"select",6)(12,"option",7),n(13,"--Seleccione--"),o(),b(14,ae,2,2,"option",8,ne),o(),d(16,re,2,0,"small",9),o(),t(17,"div",4)(18,"label"),n(19,"C\xF3digo "),t(20,"span",5),n(21,"*"),o()(),t(22,"small"),n(23,"Un c\xF3digo/n\xFAmero \xFAnico para esta cuenta"),o(),v(24,"input",10),d(25,ce,2,0,"small",9),o(),t(26,"div",4)(27,"label"),n(28,"Nombre "),t(29,"span",5),n(30,"*"),o()(),t(31,"small"),n(32,"Un t\xEDtulo corto para esta cuenta"),o(),v(33,"input",11),d(34,le,2,0,"small",9),o(),t(35,"div",4)(36,"label"),n(37,"Descripci\xF3n "),t(38,"span",12),n(39,"opcional"),o()(),t(40,"small"),n(41,"Una descripci\xF3n de c\xF3mo se debe utilizar esta cuenta"),o(),v(42,"textarea",13),o(),t(43,"div",4)(44,"label"),n(45,"Impuestos "),t(46,"span",12),n(47,"opcional"),o()(),t(48,"small"),n(49,"Impuestos por defecto para esta cuenta"),o(),t(50,"select",14)(51,"option",8),n(52,"--Seleccione--"),o(),b(53,me,2,2,"option",8,ie),o()()(),t(55,"button",15),n(56),o()()),i&2&&(s("formGroup",r.newAccountForm()),c(3),y("",r.accountId()?"Editar":"Crear"," Cuenta"),c(11),h(r.accountsType()),c(2),f(r.validField("accountTypeId")?16:-1),c(9),f(r.validField("code")?25:-1),c(9),f(r.validField("name")?34:-1),c(17),s("value",null),c(2),h(r.taxRates),c(2),s("disabled",r.newAccountForm().invalid),c(),y(" ",r.accountId()?"Editar":"Crear"," "))},dependencies:[F,P,x,D,N,I,O,E,M,w,U],styles:[".form[_ngcontent-%COMP%]{padding:2rem}label[_ngcontent-%COMP%]{color:var(--black)}.header_form[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.header_form[_ngcontent-%COMP%]   .icon_close[_ngcontent-%COMP%]{font-size:2.3rem}"],changeDetection:0})};function se(a,e){a&1&&(t(0,"small",7),n(1," requiere al menos 2 caracteres "),o())}function pe(a,e){if(a&1&&(t(0,"option",9),n(1),Q(2,"uppercase"),o()),a&2){let i=e.$implicit;s("value",i),c(),C(X(2,2,i))}}var L=class a{constructor(e){this.payload=e;this.accountTypeId.set(e.id),this.dataForm.set(e.accountType)}fb=l(R);dialogRef=l(j);formErrorService=l(V);accountTypeService=l(_);customToastService=l(k);categories=Object.values(A);newAccountTypeForm=m(this.fb.group({name:["",[p.required,p.minLength(2)]],category:["activos",[p.required]]}));accountTypeId=m(null);dataForm=m(null);ngOnInit(){this.fillOutForm()}fillOutForm(){this.accountTypeId()&&(this.newAccountTypeForm().controls.name.patchValue(this.dataForm()?.name),this.newAccountTypeForm().controls.category.patchValue(this.dataForm()?.category))}closePopUp(e=null){this.dialogRef.close(e)}validField(e){return this.newAccountTypeForm().controls[e].touched&&this.newAccountTypeForm().controls[e].invalid}onSubmit(){if(this.newAccountTypeForm().invalid){this.formErrorService.throwFormErrors(this.newAccountTypeForm());return}this.accountTypeId()?this.updateAccountType():this.createAccountType()}createAccountType(){this.accountTypeService.create(this.newAccountTypeForm().value).subscribe(e=>{this.processResponse(e)})}updateAccountType(){this.accountTypeService.update(this.accountTypeId(),this.newAccountTypeForm().value).subscribe(e=>{this.processResponse(e)})}processResponse(e){e&&e.msg?(this.customToastService.add({message:e.msg,type:"success",duration:5e3}),this.closePopUp(e.msg)):this.customToastService.add({message:e.message,type:"error",duration:5e3})}static \u0275fac=function(i){return new(i||a)(T(G))};static \u0275cmp=S({type:a,selectors:[["modal-create-update-account-type"]],decls:23,vars:5,consts:[["autocomplete","off",1,"form","container",3,"ngSubmit","formGroup"],[1,"header_form"],[1,"fa-solid","fa-xmark","icon_close",3,"click"],[1,"form_content"],[1,"col-12"],[1,"asterisk"],["formControlName","name","placeholder","Ventas - Pasivos ..."],[1,"form-text","text-danger"],["formControlName","category"],[3,"value"],["type","submit",1,"btn","btn-success","mt-4","mb-4","w-100",3,"disabled"]],template:function(i,r){i&1&&(t(0,"form",0),g("ngSubmit",function(){return r.onSubmit()}),t(1,"div",1)(2,"h3"),n(3),o(),t(4,"i",2),g("click",function(){return r.closePopUp()}),o()(),t(5,"div",3)(6,"div",4)(7,"label"),n(8,"Nombre "),t(9,"span",5),n(10,"*"),o()(),v(11,"input",6),d(12,se,2,0,"small",7),o(),t(13,"div",4)(14,"label"),n(15,"Categor\xEDa "),t(16,"span",5),n(17,"*"),o()(),t(18,"select",8),b(19,pe,3,4,"option",9,z),o()()(),t(21,"button",10),n(22),o()()),i&2&&(s("formGroup",r.newAccountTypeForm()),c(3),y("",r.accountTypeId()?"Editar":"Crear"," Tipo de cuenta"),c(9),f(r.validField("name")?12:-1),c(7),h(r.categories),c(2),s("disabled",r.newAccountTypeForm().invalid),c(),y(" ",r.accountTypeId()?"Editar":"Crear"," "))},dependencies:[F,Y,P,x,D,N,I,O,E,M,w,U],styles:[".form[_ngcontent-%COMP%]{padding:2rem}label[_ngcontent-%COMP%]{color:var(--black)}.header_form[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.header_form[_ngcontent-%COMP%]   .icon_close[_ngcontent-%COMP%]{font-size:2.3rem}"],changeDetection:0})};var Z=class a{dialogRef=l(K);lastOffsetListAccounts=m(0);_newAccountType$=new q;newAccountType$=this._newAccountType$.asObservable();_newAccount$=new q;newAccount$=this._newAccount$.asObservable();displayModalCreateUpdateAccountType(e=null){let i={id:e?.id??null,accountType:e?{name:e.name,category:e.category}:null},r=this.dialogRef.open(L,{width:"35rem",height:"auto",autoFocus:!1,data:i});r.updatePosition({top:"100px"}),r.afterClosed().subscribe(u=>{u&&this._newAccountType$.next()})}displayModalCreateOrUpdateAccount(e=null){let i={id:e?.id??null,account:e?{accountTypeId:e.accountType.id,name:e.name,code:e.code,description:e.description??null,tax:e.tax??null}:null},r=this.dialogRef.open($,{width:"50rem",height:"auto",autoFocus:!1,data:i});r.updatePosition({top:"100px"}),r.afterClosed().subscribe(u=>{u&&this._newAccount$.next()})}getBadgeByCategory(e){let i="badge bg-label-warning";switch(e){case"activos":i="badge bg-label-premium";break;case"patrimonio neto":i="badge bg-label-primary";break;case"gastos":i="badge bg-label-danger";break;case"pasivos":i="badge bg-label-light";break;case"ingresos":i="badge bg-label-success";break;default:break}return i}static \u0275fac=function(i){return new(i||a)};static \u0275prov=B({token:a,factory:a.\u0275fac,providedIn:"root"})};export{Z as a};
