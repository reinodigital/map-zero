import{a as G}from"./chunk-Z6Z62EHF.js";import{a as U,b as q}from"./chunk-ZQVIZBGI.js";import"./chunk-GZHOXXQG.js";import"./chunk-MXFBXJ6G.js";import{a as P}from"./chunk-5LJDG4R3.js";import{a as B}from"./chunk-FUDPSQJN.js";import{a as V}from"./chunk-5TLBDS6K.js";import{a as M}from"./chunk-WKFQL3IM.js";import{b as w,c as a,d as T,e as _,h as F,k as D,n as I,o as A,p as L,q as R,t as O,u as k}from"./chunk-UP3F5373.js";import{A as N,k as E,r as g,v as h,z as x}from"./chunk-4ZQGKSBB.js";import{$a as d,Ba as C,Jb as t,Ma as c,Wa as y,ba as m,fb as u,kb as p,pb as e,qb as i,rb as s,wa as f,zb as v}from"./chunk-F6XVVQNR.js";function z(r,n){r&1&&(e(0,"small",20),t(1," nombre debe tener m\xE1s de 2 caracteres "),i())}function J(r,n){r&1&&(e(0,"small",20),t(1," tel\xE9fono debe ser un n\xFAmero de 8 d\xEDgitos "),i())}function X(r,n){r&1&&(e(0,"small",20),t(1," formato incorrecto de correo "),i())}function $(r,n){r&1&&(e(0,"small",20),t(1," c\xE9dula debe tener enter 9 a 12 caracteres "),i())}var S=class r{platformId=m(C);fb=m(O);commonAdminService=m(B);authService=m(h);clientService=m(x);formErrorService=m(V);customToastService=m(M);router=m(g);sellers=f([]);emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";newClientForm=f(this.fb.group({name:["",[a.required,a.minLength(2)]],type:["CLIENTE",[a.required]],email:["",[a.required,a.pattern(this.emailPattern)]],mobile:["",[a.required,a.minLength(8),a.maxLength(8)]],identity:["",[a.required,a.minLength(8),a.maxLength(12)]],identityType:["02",[a.required]],currency:["USD",[a.required]],notes:["",[]],defaultSeller:[null,[]],activities:[[],[]]}));get isBrowser(){return E(this.platformId)}ngOnInit(){this.fetchSellers()}fetchSellers(){this.authService.fetchAllSellers().subscribe(n=>{n&&n.length&&this.sellers.set(n)})}validField(n){return this.newClientForm().controls[n].touched&&this.newClientForm().controls[n].invalid}onEconomicActivityChange(n){this.newClientForm().controls.activities.patchValue(n)}onSubmit(){if(this.newClientForm().invalid){this.formErrorService.throwFormErrors(this.newClientForm());return}let n={};n.createdAt=N(new Date);for(let l in this.newClientForm().value)if(this.newClientForm().value.hasOwnProperty(l)){let o=this.newClientForm().controls[l].value;o&&l!=="defaultSeller"&&(n[l]=o),o&&l==="defaultSeller"&&(n[l]=o.name)}this.clientService.create(n).subscribe(l=>{l&&l.msg?(this.customToastService.add({message:l.msg,type:"success",duration:5e3}),this.router.navigateByUrl("/list-clients")):this.customToastService.add({message:l.message,type:"error",duration:5e3})})}comeBackToList(){this.commonAdminService.comeBackToList("/list-clients")}static \u0275fac=function(l){return new(l||r)};static \u0275cmp=y({type:r,selectors:[["new-client"]],decls:100,vars:9,consts:[[1,"main_content"],[3,"primaryText","primaryLink"],[1,"box"],[1,"d-flex","justify-content-between","mb-5"],[1,""],[1,"cp",3,"click"],[1,"fa-solid","fa-angles-left"],[1,"d-flex","justify-content-between","align-items-center"],["id","pills-tab","role","tablist",1,"nav","nav-pills","mb-4","div_pills"],["role","presentation",1,"nav-item"],["id","pills-fields-tab","data-bs-toggle","pill","type","button","data-bs-target","#pills-fields","role","tab","aria-controls","pills-fields","aria-selected","true",1,"nav-link","active"],["id","pills-activity-tab","data-bs-toggle","pill","type","button","data-bs-target","#pills-activity","role","tab","aria-controls","pills-activity","aria-selected","false",1,"nav-link"],["id","pills-tabContent",1,"tab-content"],["id","pills-fields","role","tabpanel","aria-labelledby","pills-fields-tab","tabindex","0",1,"tab-pane","fade","active","show"],[1,"form",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-lg-4"],["for","name"],[1,"asterisk"],["type","text","formControlName","name"],[1,"text-danger"],["for","type"],["formControlName","type"],["value","CLIENTE"],["value","PROVEEDOR"],["for","mobile"],["type","text","formControlName","mobile"],["for","email"],["type","text","formControlName","email"],["for","identity"],["type","text","formControlName","identity"],["for","identityType"],["formControlName","identityType",1,"w-100"],["value","01"],["value","02"],["value","03"],["value","04"],["for","currency"],["formControlName","currency",1,"w-100"],["value","USD"],["value","CRC"],["for","defaultSeller"],[1,"muted"],["bindLabel","name","placeholder","--Seleccione--","formControlName","defaultSeller",3,"items","searchable"],[1,"col-12"],["for","notes"],["formControlName","notes","rows","2"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mt-5"],["type","submit",1,"btn","btn-success"],["id","pills-activity","role","tabpanel","aria-labelledby","pills-activity-tab","tabindex","0",1,"tab-pane","fade"],[3,"activityChange"]],template:function(l,o){l&1&&(e(0,"div",0),s(1,"breadcrumb",1),e(2,"div",2)(3,"div",3)(4,"h3",4),t(5,"Nuevo contacto"),i(),e(6,"h4",5),v("click",function(){return o.comeBackToList()}),s(7,"i",6),t(8," Regresar "),i()(),e(9,"div",7)(10,"ul",8)(11,"li",9)(12,"button",10),t(13," Formulario "),i(),e(14,"button",11),t(15," Actividades econ\xF3micas "),i()()()(),e(16,"div",12)(17,"div",13)(18,"form",14),v("ngSubmit",function(){return o.onSubmit()}),e(19,"div",15)(20,"div",16)(21,"label",17),t(22,"Nombre "),e(23,"span",18),t(24,"*"),i()(),s(25,"input",19),d(26,z,2,0,"small",20),i(),e(27,"div",16)(28,"label",21),t(29," Tipo contacto "),e(30,"span",18),t(31,"*"),i()(),e(32,"select",22)(33,"option",23),t(34,"CLIENTE"),i(),e(35,"option",24),t(36,"PROVEEDOR"),i()()(),e(37,"div",16)(38,"label",25),t(39," Tel\xE9fono "),e(40,"span",18),t(41,"*"),i()(),s(42,"input",26),d(43,J,2,0,"small",20),i(),e(44,"div",16)(45,"label",27),t(46," Correo electr\xF3nico "),e(47,"span",18),t(48,"*"),i()(),s(49,"input",28),d(50,X,2,0,"small",20),i(),e(51,"div",16)(52,"label",29),t(53," C\xE9dula "),e(54,"span",18),t(55,"*"),i()(),s(56,"input",30),d(57,$,2,0,"small",20),i(),e(58,"div",16)(59,"label",31),t(60," Tipo C\xE9dula "),e(61,"span",18),t(62,"*"),i()(),e(63,"select",32)(64,"option",33),t(65,"F\xEDsica"),i(),e(66,"option",34),t(67,"Jur\xEDdica"),i(),e(68,"option",35),t(69,"DIMEX"),i(),e(70,"option",36),t(71,"NITE"),i()()(),e(72,"div",16)(73,"label",37),t(74," Moneda "),e(75,"span",18),t(76,"*"),i()(),e(77,"select",38)(78,"option",39),t(79,"USD"),i(),e(80,"option",40),t(81,"CRC"),i()()(),e(82,"div",16)(83,"label",41),t(84," Vendedor "),e(85,"span",42),t(86,"opcional"),i()(),s(87,"ng-select",43),i()(),e(88,"div",15)(89,"div",44)(90,"label",45),t(91," Notas "),e(92,"span",42),t(93,"opcional"),i()(),s(94,"textarea",46),i()(),e(95,"div",47)(96,"button",48),t(97,"Guardar"),i()()()(),e(98,"div",49)(99,"economic-activity-select",50),v("activityChange",function(j){return o.onEconomicActivityChange(j)}),i()()()()()),l&2&&(c(),u("primaryText","Listado de contactos")("primaryLink","/list-clients"),c(17),u("formGroup",o.newClientForm()),c(8),p(o.validField("name")?26:-1),c(17),p(o.validField("mobile")?43:-1),c(7),p(o.validField("email")?50:-1),c(7),p(o.validField("identity")?57:-1),c(30),u("items",o.sellers())("searchable",!0))},dependencies:[k,F,L,R,w,A,T,_,D,I,q,U,G,P],encapsulation:2,changeDetection:0})};export{S as default};
