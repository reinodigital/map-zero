import{a as K}from"./chunk-IGI6XM3L.js";import{a as J}from"./chunk-N2AJ3Z2J.js";import"./chunk-Y5YTRTSY.js";import{a as H}from"./chunk-GRP2BXQC.js";import{b as D,c as v,d as R,e as k,h as $,i as P,k as B,n as O,o as V,p as G,q as M,r as L,t as j,u as U}from"./chunk-TUWVJ4C7.js";import{a as z}from"./chunk-5KXQMM4B.js";import{a as q}from"./chunk-XO5AROVW.js";import{A as T,C as F,I as A,k as _,r as w,w as N}from"./chunk-SQGBK3PG.js";import{Ba as h,Ib as i,Kb as u,La as r,Va as g,_a as I,ba as l,eb as s,jb as E,kb as S,mb as p,na as C,nb as d,ob as e,pb as t,qb as c,wa as b,yb as f}from"./chunk-54LR7GFL.js";var Q=(o,a)=>a.id;function X(o,a){o&1&&(e(0,"small",19),i(1," nombre debe tener m\xE1s de 2 caracteres "),t())}function Y(o,a){if(o&1&&(e(0,"option",27),i(1),t()),o&2){let n=a.$implicit;s("value",n.id),r(),u(" ",`${n.code} - ${n.name}`," ")}}function Z(o,a){if(o&1&&(e(0,"option",27),i(1),t()),o&2){let n=a.$implicit;s("value",n.code),r(),u(" ",`${n.code} - ${n.label}`," ")}}function ee(o,a){if(o&1&&(e(0,"option",27),i(1),t()),o&2){let n=a.$implicit;s("value",n.id),r(),u(" ",`${n.code} - ${n.name}`," ")}}function te(o,a){if(o&1&&(e(0,"option",27),i(1),t()),o&2){let n=a.$implicit;s("value",n.code),r(),u(" ",`${n.code} - ${n.label}`," ")}}var x=class o{platformId=l(h);destroyRef=l(C);fb=l(j);commonAdminService=l(z);router=l(w);itemService=l(A);accountService=l(N);formErrorService=l(H);customToastService=l(q);accounts=b([]);taxesArray=F;newItemForm=b(this.fb.group({name:["",[v.required,v.minLength(2)]],cabys:[null,[v.required]],costPrice:[null,[]],purchaseAccountId:["",[]],purchaseTaxRate:["",[]],purchaseDescription:["",[]],salePrice:[null,[]],saleAccountId:["",[]],saleTaxRate:["",[]],saleDescription:["",[]]}));get isBrowser(){return _(this.platformId)}ngOnInit(){this.fetchAccounts()}fetchAccounts(){this.accountService.fetchAll(999,0,{}).pipe(J(this.destroyRef)).subscribe(a=>{a&&a.accounts&&this.accounts.set(a.accounts)})}validField(a){return this.newItemForm().controls[a].touched&&this.newItemForm().controls[a].invalid}onCabysChange(a){this.newItemForm().controls.cabys.patchValue(a)}onSubmit(){if(this.newItemForm().value.cabys||this.customToastService.add({message:"Cabys es necesario para crear Item y est\xE1 faltando.",type:"error",duration:5e3}),this.newItemForm().invalid){this.formErrorService.throwFormErrors(this.newItemForm());return}let a=this.newItemForm().value;a.createdAt=T(new Date),this.itemService.create(a).subscribe(n=>{n&&n.msg?(this.customToastService.add({message:n.msg,type:"success",duration:5e3}),this.router.navigateByUrl("/list-items")):this.customToastService.add({message:n.message,type:"error",duration:5e3})})}comeBackToList(){this.commonAdminService.comeBackToList("/list-items")}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=g({type:o,selectors:[["new-item"]],decls:103,vars:2,consts:[[1,"main_content"],[1,"box"],[1,"d-flex","justify-content-between","mb-4"],[1,""],[1,"cp",3,"click"],[1,"fa-solid","fa-angles-left"],[1,"d-flex","justify-content-between","align-items-center"],["id","pills-tab","role","tablist",1,"nav","nav-pills","mb-4","div_pills"],["role","presentation",1,"nav-item"],["id","pills-fields-tab","data-bs-toggle","pill","type","button","data-bs-target","#pills-fields","role","tab","aria-controls","pills-fields","aria-selected","true",1,"nav-link","active"],["id","pills-cabys-tab","data-bs-toggle","pill","type","button","data-bs-target","#pills-cabys","role","tab","aria-controls","pills-cabys","aria-selected","false",1,"nav-link"],["id","pills-tabContent",1,"tab-content"],["id","pills-fields","role","tabpanel","aria-labelledby","pills-fields-tab","tabindex","0",1,"tab-pane","fade","active","show"],[1,"form",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-lg-4"],["for","name"],[1,"asterisk"],["type","text","formControlName","name"],[1,"text-danger"],[1,"mt-5"],["for","costPrice"],[1,"muted"],["type","number","min","0","formControlName","costPrice"],["for","purchaseAccountId"],["formControlName","purchaseAccountId"],["value",""],[3,"value"],["for","purchaseTaxRate"],["formControlName","purchaseTaxRate"],[1,"col-12"],["for","purchaseDescription"],["formControlName","purchaseDescription","rows","1"],["for","salePrice"],["type","number","min","0","formControlName","salePrice"],["for","saleAccountId"],["formControlName","saleAccountId"],["for","saleTaxRate"],["formControlName","saleTaxRate"],["for","saleDescription"],["formControlName","saleDescription","rows","1"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mt-5"],["type","submit",1,"btn","btn-success"],["id","pills-cabys","role","tabpanel","aria-labelledby","pills-cabys-tab","tabindex","0",1,"tab-pane","fade"],[3,"cabysChange"]],template:function(n,m){n&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),i(4,"Nuevo item"),t(),e(5,"h4",4),f("click",function(){return m.comeBackToList()}),c(6,"i",5),i(7," Regresar "),t()(),e(8,"div",6)(9,"ul",7)(10,"li",8)(11,"button",9),i(12," Formulario "),t(),e(13,"button",10),i(14," C\xF3digo cabys "),t()()()(),e(15,"div",11)(16,"div",12)(17,"form",13),f("ngSubmit",function(){return m.onSubmit()}),e(18,"div",14)(19,"div",15)(20,"label",16),i(21,"Nombre "),e(22,"span",17),i(23,"*"),t()(),c(24,"input",18),I(25,X,2,0,"small",19),t()(),e(26,"h2",20),i(27,"Compra"),t(),e(28,"div",14)(29,"div",15)(30,"label",21),i(31," Coste "),e(32,"span",22),i(33,"opcional"),t()(),c(34,"input",23),t(),e(35,"div",15)(36,"label",24),i(37," Cuenta de compra "),e(38,"span",22),i(39,"opcional"),t()(),e(40,"select",25)(41,"option",26),i(42,"--Seleccione--"),t(),p(43,Y,2,2,"option",27,Q),t()(),e(45,"div",15)(46,"label",28),i(47," Impuesto "),e(48,"span",22),i(49,"opcional"),t()(),e(50,"select",29)(51,"option",26),i(52,"--Seleccione--"),t(),p(53,Z,2,2,"option",27,S),t()()(),e(55,"div",14)(56,"div",30)(57,"label",31),i(58," Descripci\xF3n compra "),e(59,"span",22),i(60,"opcional"),t()(),c(61,"textarea",32),t()(),e(62,"h2",20),i(63,"Venta"),t(),e(64,"div",14)(65,"div",15)(66,"label",33),i(67," Precio venta "),e(68,"span",22),i(69,"opcional"),t()(),c(70,"input",34),t(),e(71,"div",15)(72,"label",35),i(73," Cuenta de venta "),e(74,"span",22),i(75,"opcional"),t()(),e(76,"select",36)(77,"option",26),i(78,"--Seleccione--"),t(),p(79,ee,2,2,"option",27,Q),t()(),e(81,"div",15)(82,"label",37),i(83," Impuesto "),e(84,"span",22),i(85,"opcional"),t()(),e(86,"select",38)(87,"option",26),i(88,"--Seleccione--"),t(),p(89,te,2,2,"option",27,S),t()()(),e(91,"div",14)(92,"div",30)(93,"label",39),i(94," Descripci\xF3n venta "),e(95,"span",22),i(96,"opcional"),t()(),c(97,"textarea",40),t()(),e(98,"div",41)(99,"button",42),i(100,"Guardar"),t()()()(),e(101,"div",43)(102,"cabys-select",44),f("cabysChange",function(W){return m.onCabysChange(W)}),t()()()()()),n&2&&(r(17),s("formGroup",m.newItemForm()),r(8),E(m.validField("name")?25:-1),r(18),d(m.accounts()),r(10),d(m.taxesArray),r(26),d(m.accounts()),r(10),d(m.taxesArray))},dependencies:[U,$,G,M,D,P,V,R,k,L,B,O,K],encapsulation:2,changeDetection:0})};export{x as default};
