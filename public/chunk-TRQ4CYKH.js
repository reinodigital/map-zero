import{a as R}from"./chunk-Q5WCP3HW.js";import"./chunk-UYDUL6F7.js";import{a as M}from"./chunk-KGOR65YN.js";import{a as z}from"./chunk-YRVU5RW6.js";import"./chunk-EO4DNGQO.js";import"./chunk-QULINWIQ.js";import{b as T,d as V,e as O,h as I,k as N,n as D,t as j,u as G}from"./chunk-7DSSDOH7.js";import{w as k}from"./chunk-GCLW45SM.js";import{Ib as a,Jb as v,Kb as g,La as s,Va as w,_a as C,ba as _,eb as h,ec as E,ia as u,ja as p,jb as b,mb as L,na as F,nb as y,ob as i,pb as e,qb as A,ub as f,wa as m,yb as d,zb as r}from"./chunk-QAVPLLNK.js";var $=(n,o)=>o.id;function U(n,o){if(n&1){let t=f();i(0,"i",20),d("click",function(){u(t);let l=r();return p(l.openCloseFilters())}),e()}}function P(n,o){if(n&1){let t=f();i(0,"i",21),d("click",function(){u(t);let l=r();return p(l.openCloseFilters())}),e()}}function q(n,o){n&1&&(i(0,"div",17)(1,"div",22)(2,"div",23)(3,"h4",24),a(4,"Loading"),e(),A(5,"i",25),i(6,"p",26),a(7,"Cargando..."),e()()()())}function B(n,o){if(n&1){let t=f();i(0,"tr",34),d("click",function(){let l=u(t).$implicit,x=r(2);return p(x.listAccountsService.displayModalCreateOrUpdateAccount(l))}),i(1,"td"),a(2),e(),i(3,"td",35)(4,"div",36)(5,"span",37),a(6),e(),i(7,"small"),a(8),e()()(),i(9,"td"),a(10),e()()}if(n&2){let t=o.$implicit;s(2),v(t.code),s(4),v(t.name),s(2),v(t.description),s(2),v(t.accountType.name)}}function H(n,o){if(n&1&&(i(0,"tr")(1,"div",38)(2,"div",39),a(3),e()()()),n&2){let t=r(2);s(3),g(" ",t.isActiveFilters()?"Sin resultados para esa b\xFAsqueda":"No existen cuentas por el momento en el sistema"," ")}}function J(n,o){if(n&1){let t=f();i(0,"div",18)(1,"div",2)(2,"div",10)(3,"div",27)(4,"h3"),a(5),e(),i(6,"div",28)(7,"button",29),d("click",function(){u(t);let l=r();return p(l.listAccountsService.displayModalCreateOrUpdateAccount())}),a(8," + Agregar cuenta "),e()()(),i(9,"div",30)(10,"table",31)(11,"thead")(12,"tr")(13,"th"),a(14,"C\xF3digo"),e(),i(15,"th"),a(16,"Nombre"),e(),i(17,"th"),a(18,"Tipo cuenta"),e()()(),i(19,"tbody",32),L(20,B,11,4,"tr",33,$,!1,H,4,1,"tr"),e()()()()()()}if(n&2){let t=r();s(5),g("Listado cuentas (",t.total(),")"),s(15),y(t.accounts())}}function K(n,o){if(n&1){let t=f();i(0,"div",19)(1,"app-pagination",40),d("offsetEmitter",function(l){u(t);let x=r();return p(x.detectChangeOffset(l))}),e()()}if(n&2){let t=r();s(),h("total",t.total())("factor",t.limit)("initialOffset",t.offset())}}var S=class n{fb=_(j);destroyRef=_(F);accountService=_(k);listAccountsService=_(R);accounts=m([]);limit=5;offset=E(()=>this.listAccountsService.lastOffsetListAccounts());total=m(0);isLoading=m(!0);filtersOpen=m(!1);filters=m({});isActiveFilters=m(!1);searchForm=m(this.fb.group({name:["",[]]}));ngOnInit(){this.fetchAllAccounts(),this.listAccountsService.newAccount$.pipe(M(this.destroyRef)).subscribe(o=>this.fetchAllAccounts())}fetchAllAccounts(){this.accountService.fetchAll(this.limit,this.offset(),this.filters()).subscribe(o=>{o&&o.count>=0&&(this.total.set(o.count),this.accounts.set(o.accounts)),this.isLoading.set(!1)})}openCloseFilters(){this.filtersOpen.set(!this.filtersOpen())}searchFormSubmit(){this.filters.set(this.searchForm().value),this.listAccountsService.lastOffsetListAccounts.set(0),this.isActiveFilters.set(!0),this.fetchAllAccounts()}restartFilters(){this.listAccountsService.lastOffsetListAccounts.set(0),this.isActiveFilters.set(!1),this.filters.set({}),this.searchForm().reset(),this.fetchAllAccounts()}detectChangeOffset(o){this.isLoading.set(!0),this.listAccountsService.lastOffsetListAccounts.set(o),this.fetchAllAccounts()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=w({type:n,selectors:[["list-accounts"]],decls:24,vars:5,consts:[[1,"main_content"],[1,"filters","mb-4"],[1,"box"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"mb-0"],["data-bs-toggle","collapse","data-bs-target","#collapseFilters","aria-expanded","false","aria-controls","collapseFilters",1,"fa-solid","fa-window-minimize"],["data-bs-toggle","collapse","data-bs-target","#collapseFilters","aria-expanded","false","aria-controls","collapseFilters",1,"fa-solid","fa-window-maximize"],["id","collapseFilters",1,"collapse"],[1,"card","card-body"],["autocomplete","off",1,"search_form",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-lg-4"],["for","name"],["type","text","formControlName","name"],[1,"d-flex","justify-content-start","mt-4"],["type","submit",1,"btn","btn-success"],["type","button",1,"btn","btn-light","ms-2",3,"click"],[1,"row","animate__animated","animate__fadeIn"],[1,"table_clients"],[1,"d-flex","justify-content-center","w_100","mt-4"],["data-bs-toggle","collapse","data-bs-target","#collapseFilters","aria-expanded","false","aria-controls","collapseFilters",1,"fa-solid","fa-window-minimize",3,"click"],["data-bs-toggle","collapse","data-bs-target","#collapseFilters","aria-expanded","false","aria-controls","collapseFilters",1,"fa-solid","fa-window-maximize",3,"click"],[1,"col-12"],["role","alert",1,"alert","alert-info","text-center"],[1,"alert-heading"],[1,"fa","fa-spin","fa-refresh","fa-2x"],[1,"mb-o"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"hstack","gap-3"],[1,"btn","btn-primary","mb-2",3,"click"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"animate__animated","animate__fadeIn"],[1,"admin_tr"],[1,"admin_tr",3,"click"],[1,"fs-5"],[1,"d-flex","flex-column"],[1,"text","text-primary"],[1,"w-100","d-flex","justify-content-start"],[1,"alert","alert-warning"],[3,"offsetEmitter","total","factor","initialOffset"]],template:function(t,c){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),a(5,"Filtrar cuentas"),e(),C(6,U,1,0,"i",5)(7,P,1,0,"i",6),e(),i(8,"div",7)(9,"div",8)(10,"form",9),d("ngSubmit",function(){return c.searchFormSubmit()}),i(11,"div",10)(12,"div",11)(13,"label",12),a(14,"Nombre"),e(),A(15,"input",13),e()(),i(16,"div",14)(17,"button",15),a(18,"Filtrar"),e(),i(19,"button",16),d("click",function(){return c.restartFilters()}),a(20," Restablecer filtros "),e()()()()()()(),C(21,q,8,0,"div",17)(22,J,23,2,"div",18)(23,K,2,3,"div",19),e()),t&2&&(s(6),b(c.filtersOpen()?6:7),s(4),h("formGroup",c.searchForm()),s(11),b(c.isLoading()?21:-1),s(),b(c.isLoading()?-1:22),s(),b(c.total()?23:-1))},dependencies:[G,I,T,V,O,N,D,z],encapsulation:2,changeDetection:0})};export{S as default};
