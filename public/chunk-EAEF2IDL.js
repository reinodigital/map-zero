import{a as U,b as V}from"./chunk-IOV72LXP.js";import{a as P}from"./chunk-H3WDBP26.js";import{a as k}from"./chunk-EO4DNGQO.js";import{a as M}from"./chunk-QULINWIQ.js";import{b as N,c as o,d as w,e as T,h as F,k as _,n as D,o as I,p as R,q as L,t as O,u as A}from"./chunk-7DSSDOH7.js";import{A as y,k as b,r as h,v as g,z as x}from"./chunk-GCLW45SM.js";import{Ba as C,Ib as t,La as c,Va as E,_a as d,ba as m,eb as f,jb as u,ob as e,pb as i,qb as s,wa as p,yb as S}from"./chunk-QAVPLLNK.js";function B(a,n){a&1&&(e(0,"small",12),t(1," nombre debe tener m\xE1s de 2 caracteres "),i())}function G(a,n){a&1&&(e(0,"small",12),t(1," tel\xE9fono debe ser un n\xFAmero de 8 d\xEDgitos "),i())}function j(a,n){a&1&&(e(0,"small",12),t(1," formato incorrecto de correo "),i())}function z(a,n){a&1&&(e(0,"small",12),t(1," c\xE9dula debe tener enter 9 a 12 caracteres "),i())}var v=class a{platformId=m(C);fb=m(O);commonAdminService=m(P);authService=m(g);clientService=m(x);formErrorService=m(k);customToastService=m(M);router=m(h);sellers=p([]);emailPattern="^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$";newClientForm=p(this.fb.group({name:["",[o.required,o.minLength(2)]],type:["CLIENTE",[o.required]],email:["",[o.required,o.pattern(this.emailPattern)]],mobile:["",[o.required,o.minLength(8),o.maxLength(8)]],identity:["",[o.required,o.minLength(8),o.maxLength(12)]],identityType:["02",[o.required]],currency:["USD",[o.required]],notes:["",[]],defaultSeller:[null,[]]}));get isBrowser(){return b(this.platformId)}ngOnInit(){this.fetchSellers()}fetchSellers(){this.authService.fetchAllSellers().subscribe(n=>{n&&n.length&&this.sellers.set(n)})}validField(n){return this.newClientForm().controls[n].touched&&this.newClientForm().controls[n].invalid}onSubmit(){if(this.newClientForm().invalid){this.formErrorService.throwFormErrors(this.newClientForm());return}let n={};n.createdAt=y(new Date);for(let l in this.newClientForm().value)if(this.newClientForm().value.hasOwnProperty(l)){let r=this.newClientForm().controls[l].value;r&&l!=="defaultSeller"&&(n[l]=r),r&&l==="defaultSeller"&&(n[l]=r.name)}this.clientService.create(n).subscribe(l=>{l&&l.msg?(this.customToastService.add({message:l.msg,type:"success",duration:5e3}),this.router.navigateByUrl("/list-clients")):this.customToastService.add({message:l.message,type:"error",duration:5e3})})}comeBackToList(){this.commonAdminService.comeBackToList("/list-clients")}static \u0275fac=function(l){return new(l||a)};static \u0275cmp=E({type:a,selectors:[["new-client"]],decls:88,vars:7,consts:[[1,"main_content"],[1,"box"],[1,"d-flex","justify-content-between"],[1,""],[1,"cp",3,"click"],[1,"fa-solid","fa-angles-left"],[1,"form",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-12","col-sm-6","col-lg-4"],["for","name"],[1,"asterisk"],["type","text","formControlName","name"],[1,"text-danger"],["for","type"],["formControlName","type"],["value","CLIENTE"],["value","PROVEEDOR"],["for","mobile"],["type","text","formControlName","mobile"],["for","email"],["type","text","formControlName","email"],["for","identity"],["type","text","formControlName","identity"],["for","identityType"],["formControlName","identityType",1,"w-100"],["value","01"],["value","02"],["value","03"],["value","04"],["for","currency"],["formControlName","currency",1,"w-100"],["value","USD"],["value","CRC"],["for","defaultSeller"],[1,"muted"],["bindLabel","name","placeholder","--Seleccione--","formControlName","defaultSeller",3,"items","searchable"],[1,"col-12"],["for","notes"],["formControlName","notes","rows","2"],[1,"d-flex","flex-column","justify-content-center","align-items-center","mt-5"],["type","submit",1,"btn","btn-success"]],template:function(l,r){l&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3",3),t(4,"Nuevo contacto"),i(),e(5,"h4",4),S("click",function(){return r.comeBackToList()}),s(6,"i",5),t(7," Regresar "),i()(),e(8,"form",6),S("ngSubmit",function(){return r.onSubmit()}),e(9,"div",7)(10,"div",8)(11,"label",9),t(12,"Nombre "),e(13,"span",10),t(14,"*"),i()(),s(15,"input",11),d(16,B,2,0,"small",12),i(),e(17,"div",8)(18,"label",13),t(19," Tipo contacto "),e(20,"span",10),t(21,"*"),i()(),e(22,"select",14)(23,"option",15),t(24,"CLIENTE"),i(),e(25,"option",16),t(26,"PROVEEDOR"),i()()(),e(27,"div",8)(28,"label",17),t(29,"Tel\xE9fono "),e(30,"span",10),t(31,"*"),i()(),s(32,"input",18),d(33,G,2,0,"small",12),i(),e(34,"div",8)(35,"label",19),t(36," Correo electr\xF3nico "),e(37,"span",10),t(38,"*"),i()(),s(39,"input",20),d(40,j,2,0,"small",12),i(),e(41,"div",8)(42,"label",21),t(43," C\xE9dula "),e(44,"span",10),t(45,"*"),i()(),s(46,"input",22),d(47,z,2,0,"small",12),i(),e(48,"div",8)(49,"label",23),t(50," Tipo C\xE9dula "),e(51,"span",10),t(52,"*"),i()(),e(53,"select",24)(54,"option",25),t(55,"F\xEDsica"),i(),e(56,"option",26),t(57,"Jur\xEDdica"),i(),e(58,"option",27),t(59,"DIMEX"),i(),e(60,"option",28),t(61,"NITE"),i()()(),e(62,"div",8)(63,"label",29),t(64," Moneda "),e(65,"span",10),t(66,"*"),i()(),e(67,"select",30)(68,"option",31),t(69,"USD"),i(),e(70,"option",32),t(71,"CRC"),i()()(),e(72,"div",8)(73,"label",33),t(74," Vendedor "),e(75,"span",34),t(76,"opcional"),i()(),s(77,"ng-select",35),i()(),e(78,"div",7)(79,"div",36)(80,"label",37),t(81," Notas "),e(82,"span",34),t(83,"opcional"),i()(),s(84,"textarea",38),i()(),e(85,"div",39)(86,"button",40),t(87,"Guardar"),i()()()()()),l&2&&(c(8),f("formGroup",r.newClientForm()),c(8),u(r.validField("name")?16:-1),c(17),u(r.validField("mobile")?33:-1),c(7),u(r.validField("email")?40:-1),c(7),u(r.validField("identity")?47:-1),c(30),f("items",r.sellers())("searchable",!0))},dependencies:[A,F,R,L,N,I,w,T,_,D,V,U],encapsulation:2,changeDetection:0})};export{v as default};
